import{j as e,I as y,S as ne,M as P}from"./ui-1ada5940.js";import{c as te,d as C,r as u,a as re}from"./react-d374afb9.js";import{w as ae}from"./map-50aafcb0.js";import{u as se,i as ce,a as ie,b as oe,c as le,d as ue,r as de,g as M}from"./echart-00b89b05.js";import{u as ge,d as he}from"./lang-820134cf.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))c(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&c(l)}).observe(document,{childList:!0,subtree:!0});function a(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function c(s){if(s.ep)return;s.ep=!0;const r=a(s);fetch(s.href,r)}})();var B={},$=te;B.createRoot=$.createRoot,B.hydrateRoot=$.hydrateRoot;const T=C()(t=>({type:"neco_arc",headImage:"",setCharacter:(n,a)=>t(()=>({type:n,headImage:a}))})),x=C()(t=>({language:"zh_cn",uiTranslation:null,dialogue:null,setLanguage:n=>t(()=>({language:n})),setUiTranslation:n=>t(()=>({uiTranslation:n})),setDialogue:n=>t(()=>({dialogue:n}))})),b=C()((t,n)=>({regionList:[],geoIndex:0,finalRegionList:[],setRegionList:a=>t(()=>({regionList:a})),updateFinalRegionList:()=>t(()=>({finalRegionList:n().regionList})),clearFinalRegionList:()=>t(()=>({finalRegionList:[]}))})),D=C()(t=>({isSmallScreen:!1,setIsSmallScreen:n=>t(()=>({isSmallScreen:n}))})),g=C()(t=>({prevCharacter:"neco_arc",prevRegion:"greeting",prevSubNumeric:"",prevLanguage:"zh_cn",curSentence:"",setPrevCharacter:n=>t({prevCharacter:n}),setPrevRegion:n=>t({prevRegion:n}),setPrevSubNumeric:n=>t({prevSubNumeric:n}),setPrevLanguage:n=>t({prevLanguage:n}),setCurSentence:n=>t(()=>({curSentence:n}))}));function H(t){const n=Array.from(t);for(let a=n.length-1;a>0;a-=1){const c=Math.floor(Math.random()*(a+1));[n[a],n[c]]=[n[c],n[a]]}return n}function V(t,n){return Math.floor(Math.random()*(n-t+1)+t)}function G(){const t=u.useRef(null),n=x(o=>o.dialogue),a=u.useRef(!0),c=g(o=>o.prevCharacter),s=g(o=>o.prevRegion),r=g(o=>o.prevSubNumeric),l=g(o=>o.prevLanguage),h=g(o=>o.curSentence),_=g(o=>o.setPrevCharacter),j=g(o=>o.setPrevRegion),v=g(o=>o.setPrevSubNumeric),m=g(o=>o.setPrevLanguage),d=g(o=>o.setCurSentence),L=T(o=>o.type),i=b(o=>o.finalRegionList),p=x(o=>o.language),N=b(o=>o.clearFinalRegionList),z=D(o=>o.isSmallScreen);function Z(){t.current&&t.current.classList.toggle("dialogue_bubble--invisible")}function ee(){t.current&&t.current.classList.remove("dialogue_bubble--invisible")}const S=u.useCallback((o,R,F,O)=>{if(!n)return"";const E=n[o];if(!E)return"";let w="";for(;R.length>0;){if(R=H(R),E[R[0]]){w=R[0];break}R.shift()}E[w]||(w="general");const W=E[w];let I="";if(F===""){const A=H(Object.keys(W));if(A.length<=0)return"";I=A[0]}else I=F;const k=W[I];return!k||!k[O]?"":(j(w),v(I),k[O])},[n,j,v]);return u.useEffect(()=>{!a.current||!n||(d(S(c,[s],r,l)),a.current=!1)},[n,c,s,r,l,d,S]),u.useEffect(()=>{L!==c&&(d(S(L,["greeting"],"",l)),_(L))},[L,c,l,d,S,_]),u.useEffect(()=>{i.length<=0||(d(S(c,i,"",l)),N())},[i,c,l,d,S,N]),u.useEffect(()=>{p!==l&&(d(S(c,[s],r,p)),m(p))},[p,c,s,r,l,d,S,m]),u.useEffect(()=>{z&&ee()},[z]),e.jsxs("div",{className:"dialogue_bubble",ref:t,children:[e.jsxs("div",{className:"dialogue_bubble__switch",onClick:Z,children:[e.jsx(y,{children:"visibility"}),e.jsx(y,{children:"forward"}),e.jsx(y,{children:"visibility_off"})]}),e.jsx("div",{className:"dialogue_bubble__content",children:e.jsx("span",{children:h})})]})}function q(){const t=x(c=>c.language),n=x(c=>c.setLanguage);function a(c){n(c.target.value)}return e.jsxs("div",{className:"language_select",children:[e.jsx(y,{children:"translate"}),e.jsxs(ne,{value:t,onChange:a,children:[e.jsx(P,{value:"en",children:"English"}),e.jsx(P,{value:"zh_cn",children:"中文"}),e.jsx(P,{value:"ru",children:"Русский"})]})]})}function U({text:t}){return e.jsx("div",{className:"console_label",children:t})}const me=""+new URL("meowscarada-8f30ae9e.svg",import.meta.url).href,fe=""+new URL("neco_arc-a0645750.svg",import.meta.url).href,pe=""+new URL("lopunny-ed23b7c3.svg",import.meta.url).href,xe=""+new URL("vaporeon-460baefb.svg",import.meta.url).href,ve=""+new URL("neco_arc-b9a98032.svg",import.meta.url).href,Se=""+new URL("lopunny-252a1372.svg",import.meta.url).href,be=""+new URL("meowscarada-b414bb30.svg",import.meta.url).href,_e=""+new URL("vaporeon-0cf3d389.svg",import.meta.url).href;function K(){const t=u.useRef(!0),n=T(r=>r.setCharacter),a=g(r=>r.prevCharacter),c=u.useMemo(()=>[{icon:ve,name:"neco_arc",headImage:fe},{icon:_e,name:"vaporeon",headImage:xe},{icon:Se,name:"lopunny",headImage:pe},{icon:be,name:"meowscarada",headImage:me}],[]),s=u.useCallback(r=>{var l;return(l=c.find(h=>h.name===r))==null?void 0:l.headImage},[c]);return u.useEffect(()=>{if(!t.current)return;const r=s(a);r?n(a,r):n(c[0].name,c[0].headImage),t.current=!1},[c,a,n,s]),e.jsx("div",{className:"secretary_list",children:c.map((r,l)=>e.jsx("div",{className:"secretary_list__item",onClick:()=>n(r.name,r.headImage),children:e.jsx("img",{src:r.icon,alt:r.name})},l))})}const f=C()(t=>({launchSignal:!1,cancelSignal:!1,relocateSignal:!1,setLaunchSignal:n=>t(()=>({launchSignal:n})),setCancelSignal:n=>t(()=>({cancelSignal:n})),setRelocateSignal:n=>t(()=>({relocateSignal:n}))})),je=""+new URL("cancel-ac8fdd1a.svg",import.meta.url).href,Le=""+new URL("launch-e6206def.svg",import.meta.url).href;function J({isWithLabel:t,text:n=""}){const a=f(s=>s.setCancelSignal);function c(){a(!0)}return e.jsxs("div",{className:"launch_cancel_btn launch_btn",onClick:c,children:[e.jsx("div",{className:"launch_btn__circle",children:e.jsx("div",{children:e.jsx("img",{src:je,alt:"cancel"})})}),t&&e.jsx(U,{text:n})]})}function Q({isWithLabel:t,text:n=""}){const a=f(l=>l.setLaunchSignal),c=b(l=>l.regionList),s=b(l=>l.updateFinalRegionList);function r(){s(),c.length!==0&&a(!0)}return e.jsxs("div",{className:"launch_confirm_btn launch_btn",onClick:r,children:[e.jsx("div",{className:"launch_btn__circle",children:e.jsx("div",{children:e.jsx("img",{src:Le,alt:"launch"})})}),t&&e.jsx(U,{text:n})]})}const ye=""+new URL("body-e1c4ec9d.svg",import.meta.url).href;function Ce(){const t=T(n=>n.headImage);return e.jsxs("div",{className:"secretary",style:{opacity:1},children:[e.jsx("div",{className:"secretary__head",children:e.jsx("img",{src:t,alt:"head"})}),e.jsx("div",{className:"secretary__body",children:e.jsx("img",{src:ye,alt:"body"})})]})}function Re(){return e.jsxs("div",{className:"secretary_main",children:[e.jsx(q,{}),e.jsx(G,{}),e.jsx(Ce,{})]})}function we(){return e.jsx("div",{className:"secretary_bg"})}function Ne(){return e.jsxs("div",{className:"secretary_display",children:[e.jsx(Re,{}),e.jsx(we,{})]})}function Ee(){const[t,n]=u.useState(!1),a=u.useRef(null);function c(){a.current&&(t?a.current.classList.remove("secretary_change_bar--extended"):a.current.classList.add("secretary_change_bar--extended"),n(!t))}return e.jsxs("div",{className:"secretary_change_bar",ref:a,children:[e.jsx(K,{}),e.jsxs("div",{className:"secretary_change_bar__icon",onClick:c,children:[e.jsx("div",{children:e.jsx(y,{children:"arrow_back_ios_new"})}),e.jsx("div",{children:e.jsx(y,{children:"favorite"})})]})]})}function Ie(){return e.jsxs("div",{className:"secretary_scene",children:[e.jsx(Ne,{}),e.jsx(Ee,{})]})}function Me({text:t}){const n=b(a=>a.regionList);return e.jsxs("div",{className:"selected_region_cnt",children:[e.jsx("div",{className:"selected_region_cnt__value",children:n.length}),e.jsx(U,{text:t})]})}function De(){const t=x(a=>a.language),n=x(a=>a.uiTranslation);return e.jsxs("div",{className:"captain_console",children:[e.jsx(J,{isWithLabel:!0,text:n?n.launch_cancel[t]:""}),e.jsx(Me,{text:n?n.selected_region[t]:""}),e.jsx(Q,{isWithLabel:!0,text:n?n.launch_confirm[t]:""})]})}function Te(){return e.jsxs("div",{className:"captain_cabin",children:[e.jsx(Ie,{}),e.jsx(De,{})]})}function ke({regionListLength:t}){return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:t>0?"console_wrapper console_wrapper__l":"console_wrapper console_wrapper__l console_wrapper--invisible",children:e.jsx(J,{isWithLabel:!1})}),e.jsx("div",{className:t>0?"console_wrapper console_wrapper__r":"console_wrapper console_wrapper__r console_wrapper--invisible",children:e.jsx(Q,{isWithLabel:!1})})]})}function Pe(){const t=T(n=>n.headImage);return e.jsxs("div",{className:"secretary_scene--mobile",children:[e.jsx("div",{className:"secretary__head--mobile",children:e.jsx("img",{src:t,alt:"head"})}),e.jsx(G,{})]})}function Be(){const t=b(n=>n.regionList);return e.jsxs("div",{className:"captain_cabin--mobile",children:[e.jsx(ke,{regionListLength:t.length}),e.jsx(Pe,{}),e.jsx(K,{})]})}const X=C()(t=>({count:0,increase:n=>t(a=>({count:a.count+n}))}));se([ce,ie,oe,le]);const Ue={backgroundColor:"transparent",geo:{show:!0,roam:!0,map:"world",selectedMode:"multiple",itemStyle:{areaColor:"#DAD4B5"},label:{color:"white"},emphasis:{label:{color:"white",show:!0,textBorderWidth:3,textBorderColor:"black",fontSize:"1.5rem",fontFamily:"Times New Roman"},itemStyle:{areaColor:"#E25E3E"}},select:{label:{color:"white",show:!0,textBorderWidth:3,textBorderColor:"black",fontSize:"1.5rem",fontFamily:"Times New Roman"},itemStyle:{areaColor:"#C63D2F"}},center:[37.6175,55.7519],zoom:5}},ze={width:"100%",height:"100%",border:"none",padding:"0",margin:"0"};function Fe(t){let n=0;return t.forEach(a=>{switch(a){case"Russia":n+=V(0,5e3);break;case"Greenland":n+=0;break;case"Venezuela":n+=666;break;default:n+=V(5e3,2e4);break}}),n}function Oe({style:t,settings:n,loading:a,theme:c}){const s=u.useRef(null),r=b(i=>i.regionList),l=b(i=>i.setRegionList),h=f(i=>i.launchSignal),_=f(i=>i.setLaunchSignal),j=f(i=>i.cancelSignal),v=f(i=>i.setCancelSignal),m=X(i=>i.increase),d=f(i=>i.relocateSignal),L=f(i=>i.setRelocateSignal);return u.useEffect(()=>{let i=null;function p(){i==null||i.resize()}return s.current&&(i=ue(s.current,c),i.on("geoselectchanged",N=>{l(N.allSelected[0].name)})),i&&de("world",ae),window.addEventListener("resize",p),()=>{i==null||i.dispose(),window.removeEventListener("resize",p)}},[c,l]),u.useEffect(()=>{if(!s.current)return;M(s.current).setOption(Ue,n)},[n,c]),u.useEffect(()=>{if(!s.current)return;const i=M(s.current);a?i.showLoading():i.hideLoading()},[a,c]),u.useEffect(()=>{if(!s.current||!h&&!j)return;const i=M(s.current);h&&m(Fe(r)),r.forEach(p=>{i.dispatchAction({type:"geoUnSelect",name:p})}),l([]),_(!1),v(!1)},[h,j,r,_,v,l,m]),u.useEffect(()=>{if(!d||!s.current)return;M(s.current).setOption({geo:{center:[37.6175,55.7519],zoom:5}}),L(!1)},[d,L]),e.jsx("div",{ref:s,style:{...ze,...t}})}const We=""+new URL("death-2a4fedcb.svg",import.meta.url).href,Ae=""+new URL("cloud-ccf5761c.svg",import.meta.url).href;const Y=3e3;function $e(){const[t,n]=u.useState(0),[a,c]=u.useState(0),s=X(r=>r.count);return u.useEffect(()=>{if(s<=t)return;const r=50,l=Math.floor(Y/r/2),h=s-t,_=Math.floor(h/l),j=h%l;function v(m){if(m>=l){n(s);return}c(d=>d+_),setTimeout(()=>v(m+1),r)}c(m=>m+j),setTimeout(()=>v(0),r)},[s,t]),e.jsxs("div",{className:"death_cnt",children:[e.jsx("div",{className:"death_cnt__icon",children:e.jsx("img",{src:We,alt:"death"})}),e.jsx("div",{className:"death_cnt__value",children:a})]})}function He(){return e.jsx("div",{className:"world_map__main",children:e.jsx(Oe,{})})}function Ve(){return e.jsx("div",{className:"explosion_scene",children:e.jsx("img",{src:Ae,alt:"cloud"})})}function Ge(){const t=f(a=>a.setRelocateSignal);function n(){t(!0)}return e.jsx("div",{className:"relocate_btn",onClick:n,children:e.jsx(y,{children:"zoom_out_map"})})}function qe(){const[t,n]=u.useState(e.jsx(e.Fragment,{})),a=f(s=>s.launchSignal),c=D(s=>s.isSmallScreen);return u.useEffect(()=>{a&&(n(e.jsx(Ve,{})),setTimeout(()=>{n(e.jsx(e.Fragment,{}))},Y))},[a]),e.jsxs("div",{className:"world_map",children:[e.jsx($e,{}),c&&e.jsx(q,{}),e.jsx(Ge,{}),t,e.jsx(He,{})]})}function Ke(){const t=x(r=>r.setLanguage),n=x(r=>r.setUiTranslation),a=x(r=>r.setDialogue),c=D(r=>r.isSmallScreen),s=D(r=>r.setIsSmallScreen);return u.useEffect(()=>{n(ge),a(he),t("zh_cn")},[t,n,a]),u.useEffect(()=>{s(document.body.clientWidth<=640),document.documentElement.style.setProperty("--vh",`${window.innerHeight*.01}px`),window.addEventListener("resize",()=>{s(document.body.clientWidth<=640),document.documentElement.style.setProperty("--vh",`${window.innerHeight*.01}px`)})},[s]),e.jsxs(u.StrictMode,{children:[!c&&e.jsx(Te,{}),e.jsx(qe,{}),c&&e.jsx(Be,{})]})}B.createRoot(document.getElementById("root")).render(e.jsx(re.StrictMode,{children:e.jsx(Ke,{})}));
