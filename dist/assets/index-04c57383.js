import{j as e,I as B,S as Ee,M as q}from"./ui-61263ce1.js";import{c as ke,d as F,r}from"./react-9f50a353.js";import{w as Te}from"./map-50aafcb0.js";import{u as De,g as z,i as Pe,r as He,a as Oe,b as Ue,c as Fe,d as ze}from"./echart-f39c6b45.js";import{u as Be,d as Ae}from"./lang-be59385c.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const u of s)if(u.type==="childList")for(const o of u.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&l(o)}).observe(document,{childList:!0,subtree:!0});function a(s){const u={};return s.integrity&&(u.integrity=s.integrity),s.referrerPolicy&&(u.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?u.credentials="include":s.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function l(s){if(s.ep)return;s.ep=!0;const u=a(s);fetch(s.href,u)}})();var ce,re=ke;ce=re.createRoot,re.hydrateRoot;const P=F()(n=>({language:"zh_cn",uiTranslation:null,dialogue:null,setLanguage:t=>n(()=>({language:t})),setUiTranslation:t=>n(()=>({uiTranslation:t})),setDialogue:t=>n(()=>({dialogue:t}))})),V=F()(n=>({isSmallScreen:!1,setIsSmallScreen:t=>n(()=>({isSmallScreen:t}))})),G=F()(n=>({type:"neco_arc",headImage:"",setCharacter:(t,a)=>n(()=>({type:t,headImage:a}))})),H=F()((n,t)=>({regionList:[],geoIndex:0,finalRegionList:[],setRegionList:a=>n(()=>({regionList:a})),getRegionList:()=>t().regionList,updateFinalRegionList:()=>n(()=>({finalRegionList:t().regionList})),clearFinalRegionList:()=>n(()=>({finalRegionList:[]}))})),D=F()(n=>({launchSignal:!1,cancelSignal:!1,relocateSignal:!1,setLaunchSignal:t=>n(()=>({launchSignal:t})),setCancelSignal:t=>n(()=>({cancelSignal:t})),setRelocateSignal:t=>n(()=>({relocateSignal:t}))}));function te({text:n}){return e.jsx("div",{className:"console_label",children:n})}const oe=""+new URL("cancel-ac8fdd1a.svg",import.meta.url).href,ie=""+new URL("launch-e6206def.svg",import.meta.url).href;function le({isWithLabel:n,text:t=""}){const a=D(s=>s.setCancelSignal);function l(){a(!0)}return e.jsxs("div",{className:"launch_cancel_btn launch_btn",onClick:l,children:[e.jsx("div",{className:"launch_btn__circle",children:e.jsx("div",{children:e.jsx("img",{src:oe,alt:"cancel",draggable:!1})})}),n&&e.jsx(te,{text:t})]})}function ue({isWithLabel:n,text:t=""}){const a=D(o=>o.setLaunchSignal),l=H(o=>o.regionList),s=H(o=>o.updateFinalRegionList);function u(){s(),l.length!==0&&a(!0)}return e.jsxs("div",{className:"launch_confirm_btn launch_btn",onClick:u,children:[e.jsx("div",{className:"launch_btn__circle",children:e.jsx("div",{children:e.jsx("img",{src:ie,alt:"launch",draggable:!1})})}),n&&e.jsx(te,{text:t})]})}const E=F()(n=>({prevCharacter:"neco_arc",prevRegion:"greeting",prevSubNumeric:"",prevLanguage:"zh_cn",curSentence:"",setPrevCharacter:t=>n({prevCharacter:t}),setPrevRegion:t=>n({prevRegion:t}),setPrevSubNumeric:t=>n({prevSubNumeric:t}),setPrevLanguage:t=>n({prevLanguage:t}),setCurSentence:t=>n(()=>({curSentence:t}))})),de=F()(n=>({isSelectOpen:!1,setIsSelectOpen:t=>n(()=>({isSelectOpen:t}))}));function se(n){const t=Array.from(n);for(let a=t.length-1;a>0;a-=1){const l=Math.floor(Math.random()*(a+1));[t[a],t[l]]=[t[l],t[a]]}return t}function y(n,t){return Math.floor(Math.random()*(t-n+1)+n)}function ge(){const n=r.useRef(null),t=P(d=>d.dialogue),a=r.useRef(!0),l=E(d=>d.prevCharacter),s=E(d=>d.prevRegion),u=E(d=>d.prevSubNumeric),o=E(d=>d.prevLanguage),g=E(d=>d.curSentence),m=de(d=>d.isSelectOpen),v=V(d=>d.isSmallScreen),L=E(d=>d.setPrevCharacter),h=E(d=>d.setPrevRegion),_=E(d=>d.setPrevSubNumeric),f=E(d=>d.setPrevLanguage),b=E(d=>d.setCurSentence),k=G(d=>d.type),w=H(d=>d.finalRegionList),C=P(d=>d.language),I=H(d=>d.clearFinalRegionList);function A(){n.current&&n.current.classList.toggle("dialogue_bubble--invisible")}const R=r.useCallback((d,N,O,U)=>{if(!t)return"";const T=t[d];if(!T)return"";let p="";for(;N.length>0;){if(N=se(N),T[N[0]]){p=N[0];break}N.shift()}T[p]||(p="general");const c=T[p];let i="";if(O===""){const S=se(Object.keys(c));if(S.length<=0)return"";i=S[0]}else i=O;const x=c[i];return!x||!x[U]?"":(h(p),_(i),x[U])},[t,h,_]);return r.useEffect(()=>{!a.current||!t||(b(R(l,[s],u,o)),a.current=!1)},[t,l,s,u,o,b,R]),r.useEffect(()=>{k!==l&&(b(R(k,["greeting"],"",o)),L(k))},[k,l,o,b,R,L]),r.useEffect(()=>{w.length<=0||(b(R(l,w,"",o)),I())},[w,l,o,b,R,I]),r.useEffect(()=>{C!==o&&(b(R(l,[s],u,C)),f(C))},[C,l,s,u,o,b,R,f]),e.jsxs("div",{className:"dialogue_bubble",ref:n,children:[e.jsxs("div",{className:"dialogue_bubble__switch",onClick:A,children:[e.jsx(B,{children:"visibility"}),e.jsx(B,{children:"forward"}),e.jsx(B,{children:"visibility_off"})]}),e.jsx("div",{className:"dialogue_bubble__content"+(m&&!v?" dialogue_bubble__content--shrink":""),children:e.jsx("span",{children:g})})]})}const me=r.memo(()=>{const n=P(o=>o.language),t=P(o=>o.setLanguage),a=de(o=>o.setIsSelectOpen),l=r.useCallback(o=>{t(o.target.value)},[t]),s=r.useCallback(()=>{a(!0)},[a]),u=r.useCallback(()=>{a(!1)},[a]);return e.jsxs("div",{className:"language_select",children:[e.jsx(B,{children:"translate"}),e.jsxs(Ee,{value:n,onChange:l,onOpen:s,onClose:u,children:[e.jsx(q,{value:"en",children:"English"}),e.jsx(q,{value:"zh_cn",children:"中文"}),e.jsx(q,{value:"ru",children:"Русский"})]})]})}),fe=""+new URL("wave-43a4b20c.svg",import.meta.url).href;function We(){return e.jsx("div",{className:"secretary_bg",children:e.jsxs("div",{className:"porthole",children:[[...Array(8).keys()].map(n=>e.jsx("div",{className:"porthole__rivet"},n)),e.jsx("div",{className:"sea_scene",children:e.jsx("img",{src:fe,alt:"wave",draggable:!1})})]})})}const he=""+new URL("lopunny-252a1372.svg",import.meta.url).href,pe=""+new URL("lopunny-ed23b7c3.svg",import.meta.url).href,ve=""+new URL("meowscarada-b414bb30.svg",import.meta.url).href,be=""+new URL("meowscarada-8f30ae9e.svg",import.meta.url).href,xe=""+new URL("neco_arc-b9a98032.svg",import.meta.url).href,_e=""+new URL("vaporeon-0cf3d389.svg",import.meta.url).href,Se=""+new URL("neco_arc-a0645750.svg",import.meta.url).href,ye=""+new URL("vaporeon-460baefb.svg",import.meta.url).href;const Z=[{icon:xe,name:"neco_arc",headImage:Se},{icon:_e,name:"vaporeon",headImage:ye},{icon:he,name:"lopunny",headImage:pe},{icon:ve,name:"meowscarada",headImage:be}],Le=r.memo(r.forwardRef((n,t)=>{const a=r.useRef(!0),l=r.useRef(null),s=G(g=>g.setCharacter),u=E(g=>g.prevCharacter),o=r.useCallback(g=>{var m;return(m=Z.find(v=>v.name===g))==null?void 0:m.headImage},[]);return r.useImperativeHandle(t,()=>({getHeight(){return l.current?l.current.offsetHeight:0}}),[]),r.useEffect(()=>{if(!a.current)return;const g=o(u);g?s(u,g):s(Z[0].name,Z[0].headImage),a.current=!1},[u,s,o]),e.jsx("div",{className:"secretary_list",ref:l,children:Z.map((g,m)=>e.jsx("div",{className:"secretary_list__item",onClick:()=>s(g.name,g.headImage),children:e.jsx("img",{src:g.icon,alt:g.name,draggable:!1})},m))})})),J=""+new URL("body-81f9ffb4.svg",import.meta.url).href;function $e(){const[n,t]=r.useState(""),a=r.useRef(-1),l=r.useRef(null),s=r.useRef(null),u=G(o=>o.headImage);return r.useEffect(()=>{if(n===""){t(u);return}n===u||l.current===null||s.current===null||(a.current!==-1&&clearTimeout(a.current),s.current.classList.remove("secretary--moving"),l.current.classList.remove("secretary--moving"),s.current.classList.remove("secretary--shaking"),s.current.classList.add("secretary--moving"),l.current.classList.add("secretary--moving"),a.current=setTimeout(()=>{var o,g,m;(o=s.current)==null||o.classList.remove("secretary--moving"),(g=l.current)==null||g.classList.remove("secretary--moving"),(m=s.current)==null||m.classList.add("secretary--shaking"),t(u)},300))},[u,n]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"secretary secretary--shaking",ref:s,children:[e.jsx("div",{className:"secretary__head",children:e.jsx("img",{src:u,alt:"head",draggable:!1})}),e.jsx("div",{className:"secretary__body",children:e.jsx("img",{src:J,alt:"body",draggable:!1})})]}),e.jsxs("div",{className:"secretary prev_secretary",ref:l,children:[e.jsx("div",{className:"secretary__head",children:e.jsx("img",{src:n,alt:"head",draggable:!1})}),e.jsx("div",{className:"secretary__body",children:e.jsx("img",{src:J,alt:"body",draggable:!1})})]})]})}function Ye(){return e.jsxs("div",{className:"secretary_main",children:[e.jsx(me,{}),e.jsx(ge,{}),e.jsx($e,{})]})}function Ze(){return e.jsxs("div",{className:"secretary_display",children:[e.jsx(Ye,{}),e.jsx(We,{})]})}function Xe(){const[n,t]=r.useState(!1),a=r.useRef(null);function l(){a.current&&(n?a.current.classList.remove("secretary_change_bar--extended"):a.current.classList.add("secretary_change_bar--extended"),t(!n))}return e.jsxs("div",{className:"secretary_change_bar",ref:a,children:[e.jsx(Le,{}),e.jsxs("div",{className:"secretary_change_bar__icon",onClick:l,children:[e.jsx("div",{children:e.jsx(B,{children:"arrow_back_ios_new"})}),e.jsx("div",{children:e.jsx(B,{children:"favorite"})})]})]})}function Ve(){return e.jsxs("div",{className:"secretary_scene",children:[e.jsx(Ze,{}),e.jsx(Xe,{})]})}function Ge({text:n}){const t=H(a=>a.regionList);return e.jsxs("div",{className:"selected_region_cnt",children:[e.jsx("div",{className:"selected_region_cnt__value",children:t.length}),e.jsx(te,{text:n})]})}function Ke(){const n=P(a=>a.language),t=P(a=>a.uiTranslation);return e.jsxs("div",{className:"captain_console",children:[e.jsx(le,{isWithLabel:!0,text:t?t.launch_cancel[n]:""}),e.jsx(Ge,{text:t?t.selected_region[n]:""}),e.jsx(ue,{isWithLabel:!0,text:t?t.launch_confirm[n]:""})]})}function qe(){return e.jsxs("div",{className:"captain_cabin",children:[e.jsx(Ve,{}),e.jsx(Ke,{})]})}function Je({regionListLength:n}){return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:n>0?"console_wrapper console_wrapper__l":"console_wrapper console_wrapper__l console_wrapper--invisible",children:e.jsx(le,{isWithLabel:!1})}),e.jsx("div",{className:n>0?"console_wrapper console_wrapper__r":"console_wrapper console_wrapper__r console_wrapper--invisible",children:e.jsx(ue,{isWithLabel:!1})})]})}function Qe(){const[n,t]=r.useState(""),a=r.useRef(-1),l=r.useRef(null),s=r.useRef(null),u=G(o=>o.headImage);return r.useEffect(()=>{if(n===""){t(u);return}n===u||l.current===null||s.current===null||(a.current!==-1&&clearTimeout(a.current),s.current.classList.remove("secretary_mobile__head--flipping-back"),l.current.classList.remove("secretary_mobile__head--flipping-front"),s.current.classList.remove("secretary_mobile__head--swinging"),s.current.classList.add("secretary_mobile__head--flipping-back"),l.current.classList.add("secretary_mobile__head--flipping-front"),a.current=setTimeout(()=>{var o,g,m;(o=s.current)==null||o.classList.remove("secretary_mobile__head--flipping-back"),(g=l.current)==null||g.classList.remove("secretary_mobile__head--flipping-front"),(m=s.current)==null||m.classList.add("secretary_mobile__head--swinging"),t(u)},300))},[u,n]),e.jsxs("div",{className:"secretary_scene_mobile",children:[e.jsxs("div",{className:"secretary_mobile__head",children:[e.jsx("img",{src:u,alt:"head",className:"secretary_mobile__head--swinging",draggable:!1,ref:s}),e.jsx("img",{src:n,alt:"",className:"prev_secretary_mobile__head",draggable:!1,ref:l})]}),e.jsx(ge,{})]})}const et=r.forwardRef((n,t)=>{const a=H(p=>p.regionList),[l,s]=r.useState(0),[u,o]=r.useState(0),[g,m]=r.useState(!1),[v,L]=r.useState("expanded"),[h,_]=r.useState(!1),f=r.useRef(null),b=r.useRef(null),k=r.useRef(null),w=r.useCallback(p=>{s(p),m(!1),f.current?f.current.style.bottom===""?o(parseInt(getComputedStyle(f.current).bottom)):o(parseInt(f.current.style.bottom)):o(0),f.current&&(f.current.style.transition="none"),_(!0)},[]),C=r.useCallback(p=>{if(h){if(f.current){const c=p-l;let i=0;f.current.style.bottom===""?i=parseInt(getComputedStyle(f.current).bottom):i=parseInt(f.current.style.bottom);const x=Math.max(Math.min(i-c,0),-1*(f.current.offsetHeight-(b.current?b.current.offsetHeight:0)));f.current.style.bottom=`${x}px`,o(x)}s(p)}},[l,h]),I=r.useCallback(()=>{if(!h)return;_(!1),f.current&&(f.current.style.removeProperty("bottom"),f.current.style.removeProperty("transition"));const p=.5,c=(f.current?f.current.offsetHeight:0)-(b.current?b.current.offsetHeight:0),i=k.current?k.current.getHeight():0,x=-1*u;x>=i*p&&x<(c-i)*p+i?(L("half_collapsed"),o(-1*i)):x>=(c-i)*p+i?(L("collapsed"),o(-1*c)):(L("expanded"),o(0)),s(0)},[h,u]),A=r.useCallback(()=>{m(!0)},[]),R=r.useCallback(p=>{p.preventDefault(),w(p.clientY)},[w]),d=r.useCallback(p=>{p.preventDefault(),C(p.clientY)},[C]),N=r.useCallback(p=>{p.preventDefault(),I()},[I]),O=r.useCallback(p=>{w(p.touches[0].clientY)},[w]),U=r.useCallback(p=>{C(p.touches[0].clientY)},[C]),T=r.useCallback(()=>{I()},[I]);return r.useImperativeHandle(t,()=>({onMouseUp(){I()},onMouseMove(p){g&&C(p)}}),[I,C,g]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:`captain_cabin_mobile${v==="half_collapsed"?" captain_cabin_mobile--half-collapsed":v==="collapsed"?" captain_cabin_mobile--collapsed":""}`,ref:f,children:[e.jsx(Je,{regionListLength:a.length}),e.jsx("div",{className:"captain_cabin_mobile__handle",onMouseDown:R,onMouseMove:d,onMouseUp:N,onMouseLeave:A,onTouchStart:O,onTouchMove:U,onTouchEnd:T,ref:b,children:e.jsx("div",{className:"captain_cabin_mobile__handle__icon"})}),e.jsx(Qe,{}),e.jsx(Le,{ref:k})]})})}),Ce=F()(n=>({count:0,increase:t=>n(a=>({count:a.count+t}))}));De([Oe,Ue,Fe,ze]);const Q=1,ee=50,je=5,Re=[37.6175,55.7519],X=17,tt={backgroundColor:"transparent",animationDelayUpdate:0,animationDurationUpdate:X,stateAnimation:{duration:0,delay:0,easing:void 0},geo:{show:!0,roam:!1,map:"world",selectedMode:"multiple",scaleLimit:{min:Q,max:ee},itemStyle:{areaColor:"#3c3171",borderColor:"#19102"},label:{silent:!0},emphasis:{label:{color:"#a49eb8",show:!0,textBorderWidth:2,textBorderColor:"#19102",fontSize:"1.25rem",fontFamily:"Consolas"},itemStyle:{areaColor:"#5babf8"}},select:{label:{color:"#a49eb8",show:!0,textBorderWidth:2,textBorderColor:"#19102",fontSize:"1.25rem",fontFamily:"Consolas"},itemStyle:{areaColor:"#e84981"}},center:Re,zoom:je}},nt={width:"100%",height:"100%",border:"none",padding:"0",margin:"0"};function rt(n){let t=0;return n.forEach(a=>{switch(a){case"Russia":t+=y(0,1e4);break;case"United States":t+=y(50,25e3);break;case"China":t+=y(150,5e4);break;case"Japan":t+=y(5e3,7e4);break;case"Korea":t+=y(4e3,6e4);break;case"United Kingdom":t+=y(1e3,15e3);break;case"France":t+=y(1500,2e4);break;case"Italy":t+=y(2e3,25e3);break;case"Germany":t+=y(1200,18e3);break;case"Spain":t+=y(1100,16e3);break;case"Poland":t+=y(1300,17e3);break;case"Ethiopia":t+=y(800,8e3);break;case"Iran":t+=y(700,9e3);break;case"India":t+=y(8e3,1e5);break;case"Malaysia":t+=y(2e3,2e4);break;case"Australia":t+=y(10,9e3);break;case"Canada":t+=y(0,5e3);break;case"Mexico":t+=y(4e3,4e4);break;case"Brazil":t+=y(50,6e4);break;case"Argentina":t+=y(25,1e4);break;case"Greenland":t+=0;break;case"Venezuela":t+=666;break;default:t+=y(25,8e3);break}}),t}function ae(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}const st=r.memo(({style:n,settings:t,loading:a,theme:l})=>{const s=r.useRef(!1),u=r.useRef(!0),o=r.useRef(!0),g=r.useRef(!0),m=r.useRef(5),v=r.useRef(5),L=r.useRef(0),h=r.useRef(null),_=r.useRef(null),f=H(c=>c.regionList),b=H(c=>c.setRegionList),k=H(c=>c.getRegionList),w=D(c=>c.launchSignal),C=D(c=>c.setLaunchSignal),I=D(c=>c.cancelSignal),A=D(c=>c.setCancelSignal),R=Ce(c=>c.increase),d=D(c=>c.relocateSignal),N=D(c=>c.setRelocateSignal),O=r.useCallback(c=>{if(c.targetTouches.length<2||!h.current||!u.current)return;c.preventDefault();const i=z(h.current),x=c.targetTouches[0],S=c.targetTouches[1],M={x:x.clientX,y:x.clientY},j={x:S.clientX,y:S.clientY},K={x:(M.x+j.x)/2,y:(M.y+j.y)/2},W=i.convertFromPixel({geoIndex:0},[i.getWidth()/2,i.getHeight()/2]),ne=i.convertFromPixel({geoIndex:0},[K.x,K.y]),$=ae(M,j),Y={x:ne[0]-W[0],y:ne[1]-W[1]};L.current===0&&(L.current=$),v.current=m.current,m.current=Math.min(Math.max(m.current*($/L.current),Q),ee),Math.abs($-L.current)>1e-6&&(i.setOption({geo:{zoom:m.current,center:[W[0]-(Y.x/(m.current/v.current)-Y.x),W[1]-(Y.y/(m.current/v.current)-Y.y)]}},{lazyUpdate:!0,silent:!0}),u.current=!1,setTimeout(()=>{u.current=!0},X),s.current=!0),L.current=$},[]),U=r.useCallback(()=>{L.current=0,s.current=!1},[]),T=r.useCallback(c=>{if(c.preventDefault(),!h.current||!o.current)return;const i=c.deltaY<0?1.4:1/1.4,x=z(h.current),S=x.convertFromPixel({geoIndex:0},[x.getWidth()/2,x.getHeight()/2]),M=x.convertFromPixel({geoIndex:0},[c.offsetX,c.offsetY]),j={x:M[0]-S[0],y:M[1]-S[1]};v.current=m.current,m.current=Math.min(Math.max(m.current*i,Q),ee),x.setOption({geo:{zoom:m.current,center:[S[0]-(j.x/(m.current/v.current)-j.x),S[1]-(j.y/(m.current/v.current)-j.y)]}},{lazyUpdate:!0,silent:!0}),o.current=!1,setTimeout(()=>{o.current=!0},X)},[]),p=r.useCallback(c=>{if(!h.current||!_.current||s.current)return;const i=z(h.current),x=i.getOption().geo[0].center,S={x:Math.min(i.getWidth(),Math.max(0,c.offsetX)),y:Math.min(i.getHeight(),Math.max(0,c.offsetY))},M=i.convertFromPixel({geoIndex:0},[_.current.x,_.current.y]),j=i.convertFromPixel({geoIndex:0},[S.x,S.y]);ae({x:S.x,y:S.y},{x:_.current.x,y:_.current.y})>1e-6&&g.current&&(i.setOption({geo:{center:[x[0]-(j[0]-M[0]),x[1]-(j[1]-M[1])]}},{lazyUpdate:!0,silent:!0}),_.current=S,g.current=!1,setTimeout(()=>{g.current=!0},X))},[]);return r.useEffect(()=>{const c=h.current;let i=null;function x(){i==null||i.resize()}return c&&(i=Pe(h.current,l),i.on("geoselectchanged",S=>{b(S.allSelected[0].name)}),i.getZr().on("mousedown",S=>{_.current={x:S.offsetX,y:S.offsetY}}),i.getZr().on("mousemove",p),i.getZr().on("mouseup",()=>{_.current=null}),c.addEventListener("touchmove",O),c.addEventListener("touchend",U),c.addEventListener("wheel",T),He("world",Te)),window.addEventListener("resize",x),()=>{var S,M,j;c==null||c.removeEventListener("touchmove",O),c==null||c.removeEventListener("touchend",U),c==null||c.removeEventListener("wheel",T),i==null||i.off("geoselectchanged"),(S=i==null?void 0:i.getZr())==null||S.off("mousemove"),(M=i==null?void 0:i.getZr())==null||M.off("mouseup"),(j=i==null?void 0:i.getZr())==null||j.off("mousedown"),i==null||i.dispose(),window.removeEventListener("resize",x)}},[l,b,k,O,U,T,p]),r.useEffect(()=>{if(!h.current)return;z(h.current).setOption(tt,t)},[t]),r.useEffect(()=>{if(!h.current)return;const c=z(h.current);a?c.showLoading():c.hideLoading()},[a]),r.useEffect(()=>{if(!h.current||!w&&!I)return;const c=z(h.current);w&&R(rt(f)),f.forEach(i=>{c.dispatchAction({type:"geoUnSelect",name:i})}),b([]),C(!1),A(!1)},[w,I,f,C,A,b,R]),r.useEffect(()=>{if(!d||!h.current)return;z(h.current).setOption({geo:{center:Re,zoom:je}}),N(!1)},[d,N]),e.jsx("div",{ref:h,style:{...nt,...n}})}),we=""+new URL("mushroom_head-109ffdda.png",import.meta.url).href,Ie=""+new URL("mushroom_root-bc03fce1.png",import.meta.url).href,Me=""+new URL("death-2a4fedcb.svg",import.meta.url).href;const Ne=3e3;function at(){const[n,t]=r.useState(0),[a,l]=r.useState(0),s=Ce(u=>u.count);return r.useEffect(()=>{if(s<=n)return;const u=2,o=50,g=Math.floor(Ne/o/u),m=s-n,v=Math.floor(m/g),L=m%g;function h(_){if(_>=g){t(s);return}l(f=>f+v),setTimeout(()=>h(_+1),o)}l(_=>_+L),setTimeout(()=>h(0),o)},[s,n]),e.jsxs("div",{className:"death_counter",children:[e.jsx("div",{className:"death_counter__icon",children:e.jsx("img",{src:Me,alt:"death",draggable:!1})}),e.jsx("div",{className:"death_counter__value",children:a})]})}const ct=r.memo(()=>e.jsx("div",{className:"world_map__main",children:e.jsx(st,{})}));function ot(){return e.jsxs("div",{className:"explosion_scene",children:[e.jsx("img",{src:we,alt:"mushroom head",draggable:!1}),e.jsx("img",{src:Ie,alt:"mushroom root",draggable:!1})]})}function it(){const n=D(a=>a.setRelocateSignal);function t(){n(!0)}return e.jsx("div",{className:"relocate_btn",onClick:t,children:e.jsx(B,{children:"zoom_out_map"})})}function lt(){const[n,t]=r.useState(e.jsx(e.Fragment,{})),a=D(s=>s.launchSignal),l=V(s=>s.isSmallScreen);return r.useEffect(()=>{a&&(t(e.jsx(ot,{})),setTimeout(()=>{t(e.jsx(e.Fragment,{}))},Ne))},[a]),e.jsxs("div",{className:"world_map",children:[e.jsx(at,{}),l&&e.jsx(me,{}),e.jsx(it,{}),n,e.jsx(ct,{})]})}function ut(){return e.jsxs("div",{className:"loading_spinner",children:[e.jsx("div",{}),e.jsx("div",{}),e.jsx("div",{}),e.jsx("div",{}),e.jsx("div",{}),e.jsx("div",{}),e.jsx("div",{}),e.jsx("div",{})]})}function dt(){const[n,t]=r.useState(!0),a=P(v=>v.setLanguage),l=P(v=>v.setUiTranslation),s=P(v=>v.setDialogue),u=V(v=>v.isSmallScreen),o=V(v=>v.setIsSmallScreen),g=r.useRef(null),m=r.useCallback(async v=>{const L=v.map(h=>new Promise((_,f)=>{const b=new Image;b.src=h,b.onload=_,b.onerror=f}));await Promise.all(L),t(!1)},[]);return r.useEffect(()=>{n&&(l(Be),s(Ae),a("zh_cn"),m([oe,Me,ie,he,pe,we,Ie,ve,be,xe,Se,J,_e,ye,fe]).catch(console.error))},[n,a,l,s,m]),r.useEffect(()=>{const L=()=>{o(document.body.clientWidth<=640),document.documentElement.style.setProperty("--vh",`${window.innerHeight*.01}px`)},h=()=>{var f;(f=g.current)==null||f.onMouseUp()},_=function(f){var b;(b=g.current)==null||b.onMouseMove(f.clientY)};return o(document.body.clientWidth<=640),document.documentElement.style.setProperty("--vh",`${window.innerHeight*.01}px`),window.addEventListener("resize",L),window.addEventListener("mouseup",h),window.addEventListener("mousemove",_),()=>{window.removeEventListener("resize",L),window.removeEventListener("mouseup",h),window.removeEventListener("mousemove",_)}},[o]),n?e.jsx(ut,{}):e.jsxs(e.Fragment,{children:[!u&&e.jsx(qe,{}),e.jsx(lt,{}),u&&e.jsx(et,{ref:g})]})}ce(document.getElementById("root")).render(e.jsx(r.StrictMode,{children:e.jsx(dt,{})}));
