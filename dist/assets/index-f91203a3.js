import{j as n,I as D,S as ye,M as X}from"./ui-1ada5940.js";import{c as Ce,d as P,r as c,a as Re}from"./react-d374afb9.js";import{w as we}from"./map-50aafcb0.js";import{u as Ne,g as T,i as Ee,r as Ie,a as ke,b as Me,c as Te,d as De}from"./echart-c7ccfee9.js";import{u as Pe,d as Ue}from"./lang-00e0d3bf.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function a(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(s){if(s.ep)return;s.ep=!0;const l=a(s);fetch(s.href,l)}})();var Y={},J=Ce;Y.createRoot=J.createRoot,Y.hydrateRoot=J.hydrateRoot;const H=P()(t=>({type:"neco_arc",headImage:"",setCharacter:(e,a)=>t(()=>({type:e,headImage:a}))})),w=P()(t=>({language:"zh_cn",uiTranslation:null,dialogue:null,setLanguage:e=>t(()=>({language:e})),setUiTranslation:e=>t(()=>({uiTranslation:e})),setDialogue:e=>t(()=>({dialogue:e}))})),N=P()((t,e)=>({regionList:[],geoIndex:0,finalRegionList:[],setRegionList:a=>t(()=>({regionList:a})),getRegionList:()=>e().regionList,updateFinalRegionList:()=>t(()=>({finalRegionList:e().regionList})),clearFinalRegionList:()=>t(()=>({finalRegionList:[]}))})),_=P()(t=>({prevCharacter:"neco_arc",prevRegion:"greeting",prevSubNumeric:"",prevLanguage:"zh_cn",curSentence:"",setPrevCharacter:e=>t({prevCharacter:e}),setPrevRegion:e=>t({prevRegion:e}),setPrevSubNumeric:e=>t({prevSubNumeric:e}),setPrevLanguage:e=>t({prevLanguage:e}),setCurSentence:e=>t(()=>({curSentence:e}))}));function Q(t){const e=Array.from(t);for(let a=e.length-1;a>0;a-=1){const i=Math.floor(Math.random()*(a+1));[e[a],e[i]]=[e[i],e[a]]}return e}function f(t,e){return Math.floor(Math.random()*(e-t+1)+t)}function ne(){const t=c.useRef(null),e=w(u=>u.dialogue),a=c.useRef(!0),i=_(u=>u.prevCharacter),s=_(u=>u.prevRegion),l=_(u=>u.prevSubNumeric),d=_(u=>u.prevLanguage),L=_(u=>u.curSentence),g=_(u=>u.setPrevCharacter),S=_(u=>u.setPrevRegion),m=_(u=>u.setPrevSubNumeric),h=_(u=>u.setPrevLanguage),p=_(u=>u.setCurSentence),b=H(u=>u.type),U=N(u=>u.finalRegionList),E=w(u=>u.language),O=N(u=>u.clearFinalRegionList);function W(){t.current&&t.current.classList.toggle("dialogue_bubble--invisible")}const j=c.useCallback((u,C,F,z)=>{if(!e)return"";const I=e[u];if(!I)return"";let R="";for(;C.length>0;){if(C=Q(C),I[C[0]]){R=C[0];break}C.shift()}I[R]||(R="general");const A=I[R];let r="";if(F===""){const x=Q(Object.keys(A));if(x.length<=0)return"";r=x[0]}else r=F;const o=A[r];return!o||!o[z]?"":(S(R),m(r),o[z])},[e,S,m]);return c.useEffect(()=>{!a.current||!e||(p(j(i,[s],l,d)),a.current=!1)},[e,i,s,l,d,p,j]),c.useEffect(()=>{b!==i&&(p(j(b,["greeting"],"",d)),g(b))},[b,i,d,p,j,g]),c.useEffect(()=>{U.length<=0||(p(j(i,U,"",d)),O())},[U,i,d,p,j,O]),c.useEffect(()=>{E!==d&&(p(j(i,[s],l,E)),h(E))},[E,i,s,l,d,p,j,h]),n.jsxs("div",{className:"dialogue_bubble",ref:t,children:[n.jsxs("div",{className:"dialogue_bubble__switch",onClick:W,children:[n.jsx(D,{children:"visibility"}),n.jsx(D,{children:"forward"}),n.jsx(D,{children:"visibility_off"})]}),n.jsx("div",{className:"dialogue_bubble__content",children:n.jsx("span",{children:L})})]})}const te=c.memo(()=>{const t=w(i=>i.language),e=w(i=>i.setLanguage);function a(i){e(i.target.value)}return n.jsxs("div",{className:"language_select",children:[n.jsx(D,{children:"translate"}),n.jsxs(ye,{value:t,onChange:a,children:[n.jsx(X,{value:"en",children:"English"}),n.jsx(X,{value:"zh_cn",children:"中文"}),n.jsx(X,{value:"ru",children:"Русский"})]})]})});function q({text:t}){return n.jsx("div",{className:"console_label",children:t})}const re=""+new URL("meowscarada-8f30ae9e.svg",import.meta.url).href,se=""+new URL("neco_arc-a0645750.svg",import.meta.url).href,ae=""+new URL("lopunny-ed23b7c3.svg",import.meta.url).href,ce=""+new URL("vaporeon-460baefb.svg",import.meta.url).href,oe=""+new URL("neco_arc-b9a98032.svg",import.meta.url).href,ie=""+new URL("lopunny-252a1372.svg",import.meta.url).href,le=""+new URL("meowscarada-b414bb30.svg",import.meta.url).href,ue=""+new URL("vaporeon-0cf3d389.svg",import.meta.url).href;const $=[{icon:oe,name:"neco_arc",headImage:se},{icon:ue,name:"vaporeon",headImage:ce},{icon:ie,name:"lopunny",headImage:ae},{icon:le,name:"meowscarada",headImage:re}],de=c.memo(()=>{const t=c.useRef(!0),e=H(s=>s.setCharacter),a=_(s=>s.prevCharacter),i=c.useCallback(s=>{var l;return(l=$.find(d=>d.name===s))==null?void 0:l.headImage},[]);return c.useEffect(()=>{if(!t.current)return;const s=i(a);s?e(a,s):e($[0].name,$[0].headImage),t.current=!1},[a,e,i]),n.jsx("div",{className:"secretary_list",children:$.map((s,l)=>n.jsx("div",{className:"secretary_list__item",onClick:()=>e(s.name,s.headImage),children:n.jsx("img",{src:s.icon,alt:s.name})},l))})}),y=P()(t=>({launchSignal:!1,cancelSignal:!1,relocateSignal:!1,setLaunchSignal:e=>t(()=>({launchSignal:e})),setCancelSignal:e=>t(()=>({cancelSignal:e})),setRelocateSignal:e=>t(()=>({relocateSignal:e}))})),ge=""+new URL("cancel-ac8fdd1a.svg",import.meta.url).href,me=""+new URL("launch-e6206def.svg",import.meta.url).href;function fe({isWithLabel:t,text:e=""}){const a=y(s=>s.setCancelSignal);function i(){a(!0)}return n.jsxs("div",{className:"launch_cancel_btn launch_btn",onClick:i,children:[n.jsx("div",{className:"launch_btn__circle",children:n.jsx("div",{children:n.jsx("img",{src:ge,alt:"cancel"})})}),t&&n.jsx(q,{text:e})]})}function he({isWithLabel:t,text:e=""}){const a=y(d=>d.setLaunchSignal),i=N(d=>d.regionList),s=N(d=>d.updateFinalRegionList);function l(){s(),i.length!==0&&a(!0)}return n.jsxs("div",{className:"launch_confirm_btn launch_btn",onClick:l,children:[n.jsx("div",{className:"launch_btn__circle",children:n.jsx("div",{children:n.jsx("img",{src:me,alt:"launch"})})}),t&&n.jsx(q,{text:e})]})}const pe=""+new URL("body-e1c4ec9d.svg",import.meta.url).href;function ze(){const t=H(e=>e.headImage);return n.jsxs("div",{className:"secretary",style:{opacity:1},children:[n.jsx("div",{className:"secretary__head",children:n.jsx("img",{src:t,alt:"head"})}),n.jsx("div",{className:"secretary__body",children:n.jsx("img",{src:pe,alt:"body"})})]})}function Oe(){return n.jsxs("div",{className:"secretary_main",children:[n.jsx(te,{}),n.jsx(ne,{}),n.jsx(ze,{})]})}function Fe(){return n.jsx("div",{className:"secretary_bg"})}function Ae(){return n.jsxs("div",{className:"secretary_display",children:[n.jsx(Oe,{}),n.jsx(Fe,{})]})}function Be(){const[t,e]=c.useState(!1),a=c.useRef(null);function i(){a.current&&(t?a.current.classList.remove("secretary_change_bar--extended"):a.current.classList.add("secretary_change_bar--extended"),e(!t))}return n.jsxs("div",{className:"secretary_change_bar",ref:a,children:[n.jsx(de,{}),n.jsxs("div",{className:"secretary_change_bar__icon",onClick:i,children:[n.jsx("div",{children:n.jsx(D,{children:"arrow_back_ios_new"})}),n.jsx("div",{children:n.jsx(D,{children:"favorite"})})]})]})}function We(){return n.jsxs("div",{className:"secretary_scene",children:[n.jsx(Ae,{}),n.jsx(Be,{})]})}function $e({text:t}){const e=N(a=>a.regionList);return n.jsxs("div",{className:"selected_region_cnt",children:[n.jsx("div",{className:"selected_region_cnt__value",children:e.length}),n.jsx(q,{text:t})]})}function He(){const t=w(a=>a.language),e=w(a=>a.uiTranslation);return n.jsxs("div",{className:"captain_console",children:[n.jsx(fe,{isWithLabel:!0,text:e?e.launch_cancel[t]:""}),n.jsx($e,{text:e?e.selected_region[t]:""}),n.jsx(he,{isWithLabel:!0,text:e?e.launch_confirm[t]:""})]})}function Xe(){return n.jsxs("div",{className:"captain_cabin",children:[n.jsx(We,{}),n.jsx(He,{})]})}function Ye({regionListLength:t}){return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:t>0?"console_wrapper console_wrapper__l":"console_wrapper console_wrapper__l console_wrapper--invisible",children:n.jsx(fe,{isWithLabel:!1})}),n.jsx("div",{className:t>0?"console_wrapper console_wrapper__r":"console_wrapper console_wrapper__r console_wrapper--invisible",children:n.jsx(he,{isWithLabel:!1})})]})}function Ze(){const t=H(e=>e.headImage);return n.jsxs("div",{className:"secretary_scene--mobile",children:[n.jsx("div",{className:"secretary__head--mobile",children:n.jsx("img",{src:t,alt:"head"})}),n.jsx(ne,{})]})}function Ve(){const t=N(e=>e.regionList);return n.jsxs("div",{className:"captain_cabin--mobile",children:[n.jsx(Ye,{regionListLength:t.length}),n.jsx(Ze,{}),n.jsx(de,{})]})}const xe=P()(t=>({count:0,increase:e=>t(a=>({count:a.count+e}))})),Z=P()(t=>({isSmallScreen:!1,setIsSmallScreen:e=>t(()=>({isSmallScreen:e}))}));Ne([ke,Me,Te,De]);const V=1,G=50,ve=5,Se=[37.6175,55.7519],K=68,Ge={backgroundColor:"transparent",animationDelayUpdate:0,animationDurationUpdate:K,stateAnimation:{duration:0,delay:0,easing:void 0},geo:{show:!0,roam:!1,map:"world",selectedMode:"multiple",scaleLimit:{min:V,max:G},itemStyle:{areaColor:"#DAD4B5"},label:{color:"white"},emphasis:{label:{color:"white",show:!0,textBorderWidth:3,textBorderColor:"black",fontSize:"1.5rem",fontFamily:"Times New Roman"},itemStyle:{areaColor:"#E25E3E"}},select:{label:{color:"white",show:!0,textBorderWidth:3,textBorderColor:"black",fontSize:"1.5rem",fontFamily:"Times New Roman"},itemStyle:{areaColor:"#C63D2F"}},center:Se,zoom:ve}},Ke={width:"100%",height:"100%",border:"none",padding:"0",margin:"0"};function qe(t){let e=0;return t.forEach(a=>{switch(a){case"Russia":e+=f(0,1e4);break;case"United States":e+=f(50,25e3);break;case"China":e+=f(150,5e4);break;case"Japan":e+=f(5e3,7e4);break;case"Korea":e+=f(4e3,6e4);break;case"United Kingdom":e+=f(1e3,15e3);break;case"France":e+=f(1500,2e4);break;case"Italy":e+=f(2e3,25e3);break;case"Germany":e+=f(1200,18e3);break;case"Spain":e+=f(1100,16e3);break;case"Poland":e+=f(1300,17e3);break;case"Ethiopia":e+=f(800,8e3);break;case"Iran":e+=f(700,9e3);break;case"India":e+=f(8e3,1e5);break;case"Malaysia":e+=f(2e3,2e4);break;case"Australia":e+=f(10,9e3);break;case"Canada":e+=f(0,5e3);break;case"Mexico":e+=f(4e3,4e4);break;case"Brazil":e+=f(50,6e4);break;case"Argentina":e+=f(25,1e4);break;case"Greenland":e+=0;break;case"Venezuela":e+=666;break;default:e+=f(25,8e3);break}}),e}function ee(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}const Je=c.memo(({style:t,settings:e,loading:a,theme:i})=>{const s=c.useRef(!1),l=c.useRef(!0),d=c.useRef(!0),L=c.useRef(!0),g=c.useRef(5),S=c.useRef(0),m=c.useRef(null),h=c.useRef(null),p=N(r=>r.regionList),b=N(r=>r.setRegionList),U=N(r=>r.getRegionList),E=y(r=>r.launchSignal),O=y(r=>r.setLaunchSignal),W=y(r=>r.cancelSignal),j=y(r=>r.setCancelSignal),u=xe(r=>r.increase),C=y(r=>r.relocateSignal),F=y(r=>r.setRelocateSignal),z=c.useCallback(r=>{if(r.targetTouches.length<2||!m.current||!l.current)return;const o=T(m.current),x=r.targetTouches[0],v=r.targetTouches[1],k={x:x.clientX,y:x.clientY},M={x:v.clientX,y:v.clientY},B=ee(k,M);S.current===0&&(S.current=B);const _e=g.current*(B/S.current);g.current=Math.min(Math.max(_e,V),G),Math.abs(B-S.current)>1e-6&&(o.setOption({geo:{zoom:g.current}},{lazyUpdate:!0,silent:!0}),l.current=!1,setTimeout(()=>{l.current=!0},K),s.current=!0),S.current=B},[]),I=c.useCallback(()=>{S.current=0,s.current=!1},[]),R=c.useCallback(r=>{if(!m.current||!d.current)return;const o=1.4,x=T(m.current);r.deltaY<0?g.current*=o:g.current/=o,g.current=Math.min(Math.max(g.current,V),G),x.setOption({geo:{zoom:g.current}},{lazyUpdate:!0,silent:!0}),d.current=!1,setTimeout(()=>{d.current=!0},20)},[]),A=c.useCallback(r=>{if(!m.current||!h.current||s.current)return;const o=6,x=T(m.current),v=x.getOption().geo[0].center,k=x.convertFromPixel({geoIndex:0},[h.current.x,h.current.y]),M=x.convertFromPixel({geoIndex:0},[r.offsetX,r.offsetY]);ee({x:r.offsetX,y:r.offsetY},{x:h.current.x,y:h.current.y})>1e-6&&L.current&&(x.setOption({geo:{center:[v[0]-(M[0]-k[0])*o,v[1]-(M[1]-k[1])*o]}},{lazyUpdate:!0,silent:!0}),L.current=!1,setTimeout(()=>{L.current=!0},K)),h.current={x:r.offsetX,y:r.offsetY}},[]);return c.useEffect(()=>{const r=m.current;let o=null;function x(){o==null||o.resize()}return r&&(o=Ee(m.current,i),o.on("geoselectchanged",v=>{b(v.allSelected[0].name)}),o.on("mouseout",v=>{U().includes(v.name)&&(o==null||o.resize())}),o.getZr().on("mousemove",A),o.getZr().on("mousedown",v=>{h.current={x:v.offsetX,y:v.offsetY}}),o.getZr().on("mouseup",()=>{h.current=null}),r.addEventListener("touchmove",z),r.addEventListener("touchend",I),r.addEventListener("wheel",R),Ie("world",we)),window.addEventListener("resize",x),()=>{var v,k,M;r==null||r.removeEventListener("touchmove",z),r==null||r.removeEventListener("touchend",I),r==null||r.removeEventListener("wheel",R),o==null||o.off("geoselectchanged"),(v=o==null?void 0:o.getZr())==null||v.off("mousemove"),(k=o==null?void 0:o.getZr())==null||k.off("mouseup"),(M=o==null?void 0:o.getZr())==null||M.off("mousedown"),o==null||o.dispose(),window.removeEventListener("resize",x)}},[i,b,U,z,I,R,A]),c.useEffect(()=>{if(!m.current)return;T(m.current).setOption(Ge,e)},[e]),c.useEffect(()=>{if(!m.current)return;const r=T(m.current);a?r.showLoading():r.hideLoading()},[a]),c.useEffect(()=>{if(!m.current||!E&&!W)return;const r=T(m.current);E&&u(qe(p)),p.forEach(o=>{r.dispatchAction({type:"geoUnSelect",name:o})}),b([]),O(!1),j(!1)},[E,W,p,O,j,b,u]),c.useEffect(()=>{if(!C||!m.current)return;T(m.current).setOption({geo:{center:Se,zoom:ve}}),F(!1)},[C,F]),n.jsx("div",{ref:m,style:{...Ke,...t}})}),be=""+new URL("death-2a4fedcb.svg",import.meta.url).href,Le=""+new URL("cloud-ccf5761c.svg",import.meta.url).href;const je=3e3;function Qe(){const[t,e]=c.useState(0),[a,i]=c.useState(0),s=xe(l=>l.count);return c.useEffect(()=>{if(s<=t)return;const l=50,d=Math.floor(je/l/2),L=s-t,g=Math.floor(L/d),S=L%d;function m(h){if(h>=d){e(s);return}i(p=>p+g),setTimeout(()=>m(h+1),l)}i(h=>h+S),setTimeout(()=>m(0),l)},[s,t]),n.jsxs("div",{className:"death_cnt",children:[n.jsx("div",{className:"death_cnt__icon",children:n.jsx("img",{src:be,alt:"death"})}),n.jsx("div",{className:"death_cnt__value",children:a})]})}const en=c.memo(()=>n.jsx("div",{className:"world_map__main",children:n.jsx(Je,{})}));function nn(){return n.jsx("div",{className:"explosion_scene",children:n.jsx("img",{src:Le,alt:"cloud"})})}function tn(){const t=y(a=>a.setRelocateSignal);function e(){t(!0)}return n.jsx("div",{className:"relocate_btn",onClick:e,children:n.jsx(D,{children:"zoom_out_map"})})}function rn(){const[t,e]=c.useState(n.jsx(n.Fragment,{})),a=y(s=>s.launchSignal),i=Z(s=>s.isSmallScreen);return c.useEffect(()=>{a&&(e(n.jsx(nn,{})),setTimeout(()=>{e(n.jsx(n.Fragment,{}))},je))},[a]),n.jsxs("div",{className:"world_map",children:[n.jsx(Qe,{}),i&&n.jsx(te,{}),n.jsx(tn,{}),t,n.jsx(en,{})]})}function sn(){return n.jsxs("div",{className:"loading_spinner",children:[n.jsx("div",{}),n.jsx("div",{}),n.jsx("div",{}),n.jsx("div",{}),n.jsx("div",{}),n.jsx("div",{}),n.jsx("div",{}),n.jsx("div",{})]})}function an(){const[t,e]=c.useState(!0),a=w(g=>g.setLanguage),i=w(g=>g.setUiTranslation),s=w(g=>g.setDialogue),l=Z(g=>g.isSmallScreen),d=Z(g=>g.setIsSmallScreen),L=c.useCallback(async g=>{const S=g.map(m=>new Promise((h,p)=>{const b=new Image;b.src=m,b.onload=h,b.onerror=p}));await Promise.all(S),e(!1)},[]);return c.useEffect(()=>{t&&(i(Pe),s(Ue),a("zh_cn"),L([ge,me,be,Le,pe,se,ae,re,ce,oe,ie,le,ue]).catch(console.error))},[t,a,i,s,L]),c.useEffect(()=>{d(document.body.clientWidth<=640),document.documentElement.style.setProperty("--vh",`${window.innerHeight*.01}px`),window.addEventListener("resize",()=>{d(document.body.clientWidth<=640),document.documentElement.style.setProperty("--vh",`${window.innerHeight*.01}px`)})},[d]),t?n.jsx(sn,{}):n.jsxs(c.StrictMode,{children:[!l&&n.jsx(Xe,{}),n.jsx(rn,{}),l&&n.jsx(Ve,{})]})}Y.createRoot(document.getElementById("root")).render(n.jsx(Re.StrictMode,{children:n.jsx(an,{})}));
