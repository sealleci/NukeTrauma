import{j as e,I as S,S as V,M as E}from"./ui-3ba9ceb3.js";import{c as $,d as C,r as o,a as G}from"./react-d374afb9.js";import{w as q}from"./map-50aafcb0.js";import{u as K,i as J,a as Q,b as X,c as Y,d as Z,r as ee,g as I}from"./echart-00b89b05.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function a(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=a(r);fetch(r.href,i)}})();var z={},A=$;z.createRoot=A.createRoot,z.hydrateRoot=A.hydrateRoot;const M=C()(t=>({type:"neco_arc",headImage:"",setHeadImage:(n,a)=>t(()=>({type:n,headImage:a}))})),h=C()(t=>({language:"zh_cn",uiTranslation:null,dialogue:null,setLanguage:n=>t(()=>({language:n})),setUiTranslation:n=>t(()=>({uiTranslation:n})),setDialogue:n=>t(()=>({dialogue:n}))})),x=C()(t=>({launchSignal:!1,cancelSignal:!1,setLaunchSignal:n=>t(()=>({launchSignal:n})),setCancelSignal:n=>t(()=>({cancelSignal:n}))})),U=C()(t=>({count:0,increase:n=>t(a=>({count:a.count+n}))})),_=C()((t,n)=>({regionList:[],geoIndex:0,finalRegionList:[],setRegionList:a=>t(()=>({regionList:a})),updateFinalRegionList:()=>t(()=>({finalRegionList:n().regionList})),clearFinalRegionList:()=>t(()=>({finalRegionList:[]}))}));function O(t){const n=Array.from(t);for(let a=n.length-1;a>0;a-=1){const s=Math.floor(Math.random()*(a+1));[n[a],n[s]]=[n[s],n[a]]}return n}function P(t,n){return Math.floor(Math.random()*(n-t+1)+t)}const ne="/assets/cancel-ac8fdd1a.svg",te="/assets/launch-e6206def.svg",ae="/assets/body-e1c4ec9d.svg",se="/assets/meowscarada-8f30ae9e.svg",ce="/assets/neco_arc-a0645750.svg",re="/assets/lopunny-ed23b7c3.svg",oe="/assets/vaporeon-460baefb.svg",ie="/assets/neco_arc-b9a98032.svg",le="/assets/lopunny-252a1372.svg",ue="/assets/meowscarada-b414bb30.svg",de="/assets/vaporeon-0cf3d389.svg";function ge(){const t=h(s=>s.language),n=h(s=>s.setLanguage);function a(s){n(s.target.value)}return e.jsx("div",{className:"language_select",children:e.jsxs(V,{value:t,onChange:a,children:[e.jsx(E,{value:"en",children:"English"}),e.jsx(E,{value:"zh_cn",children:"中文"}),e.jsx(E,{value:"ru",children:"Русский"})]})})}function he(){const t=o.useRef(null),n=h(g=>g.dialogue),[a,s]=o.useState("neco_arc"),[r,i]=o.useState("greeting"),[l,f]=o.useState(""),[u,p]=o.useState("zh_cn"),[m,c]=o.useState(""),d=M(g=>g.type),b=_(g=>g.finalRegionList),L=h(g=>g.language),D=_(g=>g.clearFinalRegionList);function H(){t.current&&t.current.classList.toggle("dialogue_bubble--collapsed")}const v=o.useCallback((g,j,k,T)=>{if(!n)return"";const N=n[g];if(!N)return"";let y="";for(;j.length>0;){if(j=O(j),N[j[0]]){y=j[0];break}j.shift()}N[y]||(y="general");const B=N[y];let w="";if(k===""){const F=O(Object.keys(B));if(F.length<=0)return"";w=F[0]}else w=k;const R=B[w];return!R||!R[T]?"":(i(y),f(w),R[T])},[n]);return o.useEffect(()=>{n&&c(()=>n.neco_arc.greeting[0].zh_cn)},[n]),o.useEffect(()=>{d!==a&&(c(()=>v(d,["greeting"],"",u)),s(d))},[d,u,a,v]),o.useEffect(()=>{b.length<=0||(c(()=>v(a,b,"",u)),D())},[b,a,u,v,D]),o.useEffect(()=>{L!==u&&(c(()=>v(a,[r],l,L)),p(L))},[L,a,r,l,u,v]),e.jsxs("div",{className:"dialogue_bubble",ref:t,children:[e.jsxs("div",{className:"dialogue_bubble__switch",onClick:H,children:[e.jsx(S,{children:"visibility"}),e.jsx(S,{children:"forward"}),e.jsx(S,{children:"visibility_off"})]}),e.jsx("div",{className:"dialogue_bubble__content",children:e.jsx("span",{children:m})})]})}function fe(){const t=M(n=>n.headImage);return e.jsxs("div",{className:"secretary",style:{opacity:1},children:[e.jsx("div",{className:"secretary__head",children:e.jsx("img",{src:t,alt:"head"})}),e.jsx("div",{className:"secretary__body",children:e.jsx("img",{src:ae,alt:"body"})})]})}function me(){return e.jsxs("div",{className:"secretary_main",children:[e.jsx(ge,{}),e.jsx(he,{}),e.jsx(fe,{})]})}function xe(){return e.jsx("div",{className:"secretary_bg"})}function _e(){return e.jsxs("div",{className:"secretary_display",children:[e.jsx(me,{}),e.jsx(xe,{})]})}function pe(){const t=M(a=>a.setHeadImage),n=o.useMemo(()=>[{icon:ie,name:"neco_arc",headImage:ce},{icon:de,name:"vaporeon",headImage:oe},{icon:le,name:"lopunny",headImage:re},{icon:ue,name:"meowscarada",headImage:se}],[]);return o.useEffect(()=>{t(n[0].name,n[0].headImage)},[t,n]),e.jsx("div",{className:"secretary_list",children:n.map((a,s)=>e.jsx("div",{className:"secretary_list__item",onClick:()=>t(a.name,a.headImage),children:e.jsx("img",{src:a.icon,alt:a.name})},s))})}function ve(){const[t,n]=o.useState(!1),a=o.useRef(null);function s(){a.current&&(t?a.current.classList.remove("secretary_change_bar--extended"):a.current.classList.add("secretary_change_bar--extended"),n(!t))}return e.jsxs("div",{className:"secretary_change_bar",ref:a,children:[e.jsx(pe,{}),e.jsxs("div",{className:"secretary_change_bar__icon",onClick:s,children:[e.jsx("div",{children:e.jsx(S,{children:"arrow_back_ios_new"})}),e.jsx("div",{children:e.jsx(S,{children:"favorite"})})]})]})}function je(){return e.jsxs("div",{className:"secretary_scene",children:[e.jsx(_e,{}),e.jsx(ve,{})]})}const be=o.memo(({text:t})=>{const n=x(s=>s.setCancelSignal);function a(){n(!0)}return e.jsxs("div",{className:"launch_cancel_btn launch_btn",onClick:a,children:[e.jsx("div",{className:"launch_btn__circle",children:e.jsx("div",{children:e.jsx("img",{src:ne,alt:"cancel"})})}),e.jsx("div",{className:"console_label",children:t})]})});function ye({text:t}){const n=_(a=>a.regionList);return e.jsxs("div",{className:"selected_region_cnt",children:[e.jsx("div",{className:"selected_region_cnt__value",children:n.length}),e.jsx("div",{className:"console_label",children:t})]})}function Se(t){let n=0;return t.forEach(a=>{switch(a){case"Russia":n+=P(0,5e3);break;case"Greenland":n+=0;break;case"Venezuela":n+=666;break;default:n+=P(5e3,2e4);break}}),n}const Ce=o.memo(({text:t})=>{const n=x(l=>l.setLaunchSignal),a=_(l=>l.regionList),s=_(l=>l.updateFinalRegionList),r=U(l=>l.increase);function i(){s(),a.length!==0&&(n(!0),r(Se(a)))}return e.jsxs("div",{className:"launch_confirm_btn launch_btn",onClick:i,children:[e.jsx("div",{className:"launch_btn__circle",children:e.jsx("div",{children:e.jsx("img",{src:te,alt:"launch"})})}),e.jsx("div",{className:"console_label",children:t})]})});function Le(){const t=h(a=>a.language),n=h(a=>a.uiTranslation);return e.jsxs("div",{className:"captain_console",children:[e.jsx(be,{text:n?n.launch_cancel[t]:""}),e.jsx(ye,{text:n?n.selected_region[t]:""}),e.jsx(Ce,{text:n?n.launch_confirm[t]:""})]})}function Ne(){return e.jsxs("div",{className:"captain_cabin",children:[e.jsx(je,{}),e.jsx(Le,{})]})}K([J,Q,X,Y]);const we={backgroundColor:"transparent",geo:{show:!0,roam:!0,map:"world",selectedMode:"multiple",itemStyle:{areaColor:"#DAD4B5"},label:{color:"white"},emphasis:{label:{color:"white",show:!0,textBorderWidth:3,textBorderColor:"black",fontSize:"1.5rem",fontFamily:"Times New Roman"},itemStyle:{areaColor:"#E25E3E"}},select:{label:{color:"white",show:!0,textBorderWidth:3,textBorderColor:"black",fontSize:"1.5rem",fontFamily:"Times New Roman"},itemStyle:{areaColor:"#C63D2F"}},center:[37.6175,55.7519],zoom:5}},Re={width:"100%",height:"99%",border:"none",padding:"0",margin:"0"};function Ee({style:t,settings:n,loading:a,theme:s}){const r=o.useRef(null),i=_(c=>c.regionList),l=_(c=>c.setRegionList),f=x(c=>c.launchSignal),u=x(c=>c.setLaunchSignal),p=x(c=>c.cancelSignal),m=x(c=>c.setCancelSignal);return o.useEffect(()=>{let c=null;function d(){c==null||c.resize()}return r.current&&(c=Z(r.current,s),c.on("geoselectchanged",b=>{l(b.allSelected[0].name)})),c&&ee("world",q),window.addEventListener("resize",d),()=>{c==null||c.dispose(),window.removeEventListener("resize",d)}},[s,l]),o.useEffect(()=>{if(!r.current)return;I(r.current).setOption(we,n)},[n,s]),o.useEffect(()=>{if(!r.current)return;const c=I(r.current);a?c.showLoading():c.hideLoading()},[a,s]),o.useEffect(()=>{if(!r.current||!f&&!p)return;const c=I(r.current);i.forEach(d=>{c.dispatchAction({type:"geoUnSelect",name:d})}),l([]),u(!1),m(!1)},[f,u,p,m,i,l]),e.jsx("div",{ref:r,style:{...Re,...t}})}const Ie="/assets/death-2a4fedcb.svg",ze="/assets/cloud-ccf5761c.svg";const W=3e3;function Me(){const[t,n]=o.useState(0),[a,s]=o.useState(0),r=U(i=>i.count);return o.useEffect(()=>{if(r<=t)return;const i=50,l=Math.floor(W/i/2),f=r-t,u=Math.floor(f/l),p=f%l;function m(c){if(c>=l){n(r);return}s(d=>d+u),setTimeout(()=>m(c+1),i)}s(c=>c+p),setTimeout(()=>m(0),i)},[r,t]),e.jsxs("div",{className:"death_cnt",children:[e.jsx("div",{className:"death_cnt__icon",children:e.jsx("img",{src:Ie,alt:"death"})}),e.jsx("div",{className:"death_cnt__value",children:a})]})}function De(){return e.jsx("div",{className:"world_map__main",children:e.jsx(Ee,{})})}function ke(){return e.jsx("div",{className:"explosion_scene",children:e.jsx("img",{src:ze,alt:"cloud"})})}function Te(){const[t,n]=o.useState(e.jsx(e.Fragment,{})),a=x(s=>s.launchSignal);return o.useEffect(()=>{a&&(n(e.jsx(ke,{})),setTimeout(()=>{n(e.jsx(e.Fragment,{}))},W))},[a]),e.jsxs("div",{className:"world_map",children:[e.jsx(Me,{}),t,e.jsx(De,{})]})}const Be={zh_cn:"终止",en:"CANCEL",ru:"ОТМЕНА"},Fe={zh_cn:"发射",en:"LAUNCH",ru:"ЗАПУСК"},Ae={zh_cn:"已选区域",en:"SELECTED",ru:"ВЫБРАН"},Oe={launch_cancel:Be,launch_confirm:Fe,selected_region:Ae},Pe={greeting:{0:{zh_cn:"船长，早上好。",en:"Captain, good morning.",ru:"Капитан, доброе утро."},1:{zh_cn:"呜噜喵~",en:"Uru nya~",ru:"Уру ня~"},2:{zh_cn:"",en:"",ru:""}},general:{0:{zh_cn:"哎呀，真是惨烈喵！",en:"Ouch, it was a critical hit!",ru:"Ой, это был критический удар!"},1:{zh_cn:"",en:"",ru:""}}},Ue={greeting:{0:{zh_cn:"可以摸摸我吗，船长？",en:"Can you pet me, Captain?",ru:"Можете погладить меня, Капитан?"}},general:{0:{zh_cn:"呵呵，美丽的世界。",en:"Such a beautiful world.",ru:"Великолепный мир."}}},We={greeting:{0:{zh_cn:"船长，想喝咖啡吗？",en:"Captain, would you like a coffee?",ru:"Капитан, хотите кофе?"}},general:{0:{zh_cn:"大海比陆地好。",en:"The sea is better than land.",ru:"Море лучше чем земля."}}},He={greeting:{0:{zh_cn:"请下达指令，船长。",en:"Please issue orders, Captain.",ru:"Пожалуйста, выдать указания, Капитан."}},general:{0:{zh_cn:"我感觉好热。",en:"I feel hot.",ru:"Мне жарко."}}},Ve={neco_arc:Pe,meowscarada:Ue,vaporeon:We,lopunny:He};function $e(){const t=h(s=>s.setLanguage),n=h(s=>s.setUiTranslation),a=h(s=>s.setDialogue);return o.useEffect(()=>{n(Oe),a(Ve),t("zh_cn")},[t,n,a]),e.jsxs(o.StrictMode,{children:[e.jsx(Ne,{}),e.jsx(Te,{})]})}z.createRoot(document.getElementById("root")).render(e.jsx(G.StrictMode,{children:e.jsx($e,{})}));
