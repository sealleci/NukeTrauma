import{j as e,I as S,S as V,M as I}from"./ui-3ba9ceb3.js";import{c as $,d as L,r as i,a as G}from"./react-d374afb9.js";import{w as q}from"./map-50aafcb0.js";import{u as K,i as J,a as Q,b as X,c as Y,d as Z,r as ee,g as E}from"./echart-00b89b05.js";import{u as ne,d as te}from"./lang-820134cf.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function s(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(r){if(r.ep)return;r.ep=!0;const o=s(r);fetch(r.href,o)}})();var M={},O=$;M.createRoot=O.createRoot,M.hydrateRoot=O.hydrateRoot;const D=L()(t=>({type:"neco_arc",headImage:"",setHeadImage:(n,s)=>t(()=>({type:n,headImage:s}))})),h=L()(t=>({language:"zh_cn",uiTranslation:null,dialogue:null,setLanguage:n=>t(()=>({language:n})),setUiTranslation:n=>t(()=>({uiTranslation:n})),setDialogue:n=>t(()=>({dialogue:n}))})),x=L()(t=>({launchSignal:!1,cancelSignal:!1,setLaunchSignal:n=>t(()=>({launchSignal:n})),setCancelSignal:n=>t(()=>({cancelSignal:n}))})),U=L()(t=>({count:0,increase:n=>t(s=>({count:s.count+n}))})),v=L()((t,n)=>({regionList:[],geoIndex:0,finalRegionList:[],setRegionList:s=>t(()=>({regionList:s})),updateFinalRegionList:()=>t(()=>({finalRegionList:n().regionList})),clearFinalRegionList:()=>t(()=>({finalRegionList:[]}))}));function P(t){const n=Array.from(t);for(let s=n.length-1;s>0;s-=1){const a=Math.floor(Math.random()*(s+1));[n[s],n[a]]=[n[a],n[s]]}return n}function A(t,n){return Math.floor(Math.random()*(n-t+1)+t)}const se="/assets/cancel-ac8fdd1a.svg",ae="/assets/launch-e6206def.svg",ce="/assets/body-e1c4ec9d.svg",re="/assets/meowscarada-8f30ae9e.svg",ie="/assets/neco_arc-a0645750.svg",oe="/assets/lopunny-ed23b7c3.svg",le="/assets/vaporeon-460baefb.svg",ue="/assets/neco_arc-b9a98032.svg",de="/assets/lopunny-252a1372.svg",ge="/assets/meowscarada-b414bb30.svg",he="/assets/vaporeon-0cf3d389.svg";function fe(){const t=h(a=>a.language),n=h(a=>a.setLanguage);function s(a){n(a.target.value)}return e.jsx("div",{className:"language_select",children:e.jsxs(V,{value:t,onChange:s,children:[e.jsx(I,{value:"en",children:"English"}),e.jsx(I,{value:"zh_cn",children:"中文"}),e.jsx(I,{value:"ru",children:"Русский"})]})})}function me(){const t=i.useRef(null),n=h(g=>g.dialogue),[s,a]=i.useState("neco_arc"),[r,o]=i.useState("greeting"),[l,f]=i.useState(""),[u,j]=i.useState("zh_cn"),[m,c]=i.useState(""),d=D(g=>g.type),b=v(g=>g.finalRegionList),C=h(g=>g.language),k=v(g=>g.clearFinalRegionList);function H(){t.current&&t.current.classList.toggle("dialogue_bubble--collapsed")}const p=i.useCallback((g,_,T,z)=>{if(!n)return"";const N=n[g];if(!N)return"";let y="";for(;_.length>0;){if(_=P(_),N[_[0]]){y=_[0];break}_.shift()}N[y]||(y="general");const B=N[y];let R="";if(T===""){const F=P(Object.keys(B));if(F.length<=0)return"";R=F[0]}else R=T;const w=B[R];return!w||!w[z]?"":(o(y),f(R),w[z])},[n]);return i.useEffect(()=>{n&&c(()=>n.neco_arc.greeting[0].zh_cn)},[n]),i.useEffect(()=>{d!==s&&(c(()=>p(d,["greeting"],"",u)),a(d))},[d,u,s,p]),i.useEffect(()=>{b.length<=0||(c(()=>p(s,b,"",u)),k())},[b,s,u,p,k]),i.useEffect(()=>{C!==u&&(c(()=>p(s,[r],l,C)),j(C))},[C,s,r,l,u,p]),e.jsxs("div",{className:"dialogue_bubble",ref:t,children:[e.jsxs("div",{className:"dialogue_bubble__switch",onClick:H,children:[e.jsx(S,{children:"visibility"}),e.jsx(S,{children:"forward"}),e.jsx(S,{children:"visibility_off"})]}),e.jsx("div",{className:"dialogue_bubble__content",children:e.jsx("span",{children:m})})]})}function xe(){const t=D(n=>n.headImage);return e.jsxs("div",{className:"secretary",style:{opacity:1},children:[e.jsx("div",{className:"secretary__head",children:e.jsx("img",{src:t,alt:"head"})}),e.jsx("div",{className:"secretary__body",children:e.jsx("img",{src:ce,alt:"body"})})]})}function ve(){return e.jsxs("div",{className:"secretary_main",children:[e.jsx(fe,{}),e.jsx(me,{}),e.jsx(xe,{})]})}function je(){return e.jsx("div",{className:"secretary_bg"})}function pe(){return e.jsxs("div",{className:"secretary_display",children:[e.jsx(ve,{}),e.jsx(je,{})]})}function _e(){const t=D(s=>s.setHeadImage),n=i.useMemo(()=>[{icon:ue,name:"neco_arc",headImage:ie},{icon:he,name:"vaporeon",headImage:le},{icon:de,name:"lopunny",headImage:oe},{icon:ge,name:"meowscarada",headImage:re}],[]);return i.useEffect(()=>{t(n[0].name,n[0].headImage)},[t,n]),e.jsx("div",{className:"secretary_list",children:n.map((s,a)=>e.jsx("div",{className:"secretary_list__item",onClick:()=>t(s.name,s.headImage),children:e.jsx("img",{src:s.icon,alt:s.name})},a))})}function be(){const[t,n]=i.useState(!1),s=i.useRef(null);function a(){s.current&&(t?s.current.classList.remove("secretary_change_bar--extended"):s.current.classList.add("secretary_change_bar--extended"),n(!t))}return e.jsxs("div",{className:"secretary_change_bar",ref:s,children:[e.jsx(_e,{}),e.jsxs("div",{className:"secretary_change_bar__icon",onClick:a,children:[e.jsx("div",{children:e.jsx(S,{children:"arrow_back_ios_new"})}),e.jsx("div",{children:e.jsx(S,{children:"favorite"})})]})]})}function ye(){return e.jsxs("div",{className:"secretary_scene",children:[e.jsx(pe,{}),e.jsx(be,{})]})}const Se=i.memo(({text:t})=>{const n=x(a=>a.setCancelSignal);function s(){n(!0)}return e.jsxs("div",{className:"launch_cancel_btn launch_btn",onClick:s,children:[e.jsx("div",{className:"launch_btn__circle",children:e.jsx("div",{children:e.jsx("img",{src:se,alt:"cancel"})})}),e.jsx("div",{className:"console_label",children:t})]})});function Le({text:t}){const n=v(s=>s.regionList);return e.jsxs("div",{className:"selected_region_cnt",children:[e.jsx("div",{className:"selected_region_cnt__value",children:n.length}),e.jsx("div",{className:"console_label",children:t})]})}function Ce(t){let n=0;return t.forEach(s=>{switch(s){case"Russia":n+=A(0,5e3);break;case"Greenland":n+=0;break;case"Venezuela":n+=666;break;default:n+=A(5e3,2e4);break}}),n}const Ne=i.memo(({text:t})=>{const n=x(l=>l.setLaunchSignal),s=v(l=>l.regionList),a=v(l=>l.updateFinalRegionList),r=U(l=>l.increase);function o(){a(),s.length!==0&&(n(!0),r(Ce(s)))}return e.jsxs("div",{className:"launch_confirm_btn launch_btn",onClick:o,children:[e.jsx("div",{className:"launch_btn__circle",children:e.jsx("div",{children:e.jsx("img",{src:ae,alt:"launch"})})}),e.jsx("div",{className:"console_label",children:t})]})});function Re(){const t=h(s=>s.language),n=h(s=>s.uiTranslation);return e.jsxs("div",{className:"captain_console",children:[e.jsx(Se,{text:n?n.launch_cancel[t]:""}),e.jsx(Le,{text:n?n.selected_region[t]:""}),e.jsx(Ne,{text:n?n.launch_confirm[t]:""})]})}function we(){return e.jsxs("div",{className:"captain_cabin",children:[e.jsx(ye,{}),e.jsx(Re,{})]})}K([J,Q,X,Y]);const Ie={backgroundColor:"transparent",geo:{show:!0,roam:!0,map:"world",selectedMode:"multiple",itemStyle:{areaColor:"#DAD4B5"},label:{color:"white"},emphasis:{label:{color:"white",show:!0,textBorderWidth:3,textBorderColor:"black",fontSize:"1.5rem",fontFamily:"Times New Roman"},itemStyle:{areaColor:"#E25E3E"}},select:{label:{color:"white",show:!0,textBorderWidth:3,textBorderColor:"black",fontSize:"1.5rem",fontFamily:"Times New Roman"},itemStyle:{areaColor:"#C63D2F"}},center:[37.6175,55.7519],zoom:5}},Ee={width:"100%",height:"99%",border:"none",padding:"0",margin:"0"};function Me({style:t,settings:n,loading:s,theme:a}){const r=i.useRef(null),o=v(c=>c.regionList),l=v(c=>c.setRegionList),f=x(c=>c.launchSignal),u=x(c=>c.setLaunchSignal),j=x(c=>c.cancelSignal),m=x(c=>c.setCancelSignal);return i.useEffect(()=>{let c=null;function d(){c==null||c.resize()}return r.current&&(c=Z(r.current,a),c.on("geoselectchanged",b=>{l(b.allSelected[0].name)})),c&&ee("world",q),window.addEventListener("resize",d),()=>{c==null||c.dispose(),window.removeEventListener("resize",d)}},[a,l]),i.useEffect(()=>{if(!r.current)return;E(r.current).setOption(Ie,n)},[n,a]),i.useEffect(()=>{if(!r.current)return;const c=E(r.current);s?c.showLoading():c.hideLoading()},[s,a]),i.useEffect(()=>{if(!r.current||!f&&!j)return;const c=E(r.current);o.forEach(d=>{c.dispatchAction({type:"geoUnSelect",name:d})}),l([]),u(!1),m(!1)},[f,u,j,m,o,l]),e.jsx("div",{ref:r,style:{...Ee,...t}})}const De="/assets/death-2a4fedcb.svg",ke="/assets/cloud-ccf5761c.svg";const W=3e3;function Te(){const[t,n]=i.useState(0),[s,a]=i.useState(0),r=U(o=>o.count);return i.useEffect(()=>{if(r<=t)return;const o=50,l=Math.floor(W/o/2),f=r-t,u=Math.floor(f/l),j=f%l;function m(c){if(c>=l){n(r);return}a(d=>d+u),setTimeout(()=>m(c+1),o)}a(c=>c+j),setTimeout(()=>m(0),o)},[r,t]),e.jsxs("div",{className:"death_cnt",children:[e.jsx("div",{className:"death_cnt__icon",children:e.jsx("img",{src:De,alt:"death"})}),e.jsx("div",{className:"death_cnt__value",children:s})]})}function ze(){return e.jsx("div",{className:"world_map__main",children:e.jsx(Me,{})})}function Be(){return e.jsx("div",{className:"explosion_scene",children:e.jsx("img",{src:ke,alt:"cloud"})})}function Fe(){const[t,n]=i.useState(e.jsx(e.Fragment,{})),s=x(a=>a.launchSignal);return i.useEffect(()=>{s&&(n(e.jsx(Be,{})),setTimeout(()=>{n(e.jsx(e.Fragment,{}))},W))},[s]),e.jsxs("div",{className:"world_map",children:[e.jsx(Te,{}),t,e.jsx(ze,{})]})}function Oe(){const t=h(a=>a.setLanguage),n=h(a=>a.setUiTranslation),s=h(a=>a.setDialogue);return i.useEffect(()=>{n(ne),s(te),t("zh_cn")},[t,n,s]),e.jsxs(i.StrictMode,{children:[e.jsx(we,{}),e.jsx(Fe,{})]})}M.createRoot(document.getElementById("root")).render(e.jsx(G.StrictMode,{children:e.jsx(Oe,{})}));
