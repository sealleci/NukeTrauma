import{j as e,I as y,S as V,M as I}from"./ui-3ba9ceb3.js";import{c as $,d as S,r as i,a as G}from"./react-d374afb9.js";import{w as q}from"./map-50aafcb0.js";import{u as K,i as J,a as Q,b as X,c as Y,d as Z,r as ee,g as E}from"./echart-00b89b05.js";import{u as ne,d as te}from"./lang-820134cf.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))s(c);new MutationObserver(c=>{for(const o of c)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function a(c){const o={};return c.integrity&&(o.integrity=c.integrity),c.referrerPolicy&&(o.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?o.credentials="include":c.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(c){if(c.ep)return;c.ep=!0;const o=a(c);fetch(c.href,o)}})();var M={},F=$;M.createRoot=F.createRoot,M.hydrateRoot=F.hydrateRoot;const U=S()(t=>({type:"neco_arc",headImage:"",setHeadImage:(n,a)=>t(()=>({type:n,headImage:a}))})),h=S()(t=>({language:"zh_cn",uiTranslation:null,dialogue:null,setLanguage:n=>t(()=>({language:n})),setUiTranslation:n=>t(()=>({uiTranslation:n})),setDialogue:n=>t(()=>({dialogue:n}))})),x=S()(t=>({launchSignal:!1,cancelSignal:!1,setLaunchSignal:n=>t(()=>({launchSignal:n})),setCancelSignal:n=>t(()=>({cancelSignal:n}))})),A=S()(t=>({count:0,increase:n=>t(a=>({count:a.count+n}))})),p=S()((t,n)=>({regionList:[],geoIndex:0,finalRegionList:[],setRegionList:a=>t(()=>({regionList:a})),updateFinalRegionList:()=>t(()=>({finalRegionList:n().regionList})),clearFinalRegionList:()=>t(()=>({finalRegionList:[]}))}));function O(t){const n=Array.from(t);for(let a=n.length-1;a>0;a-=1){const s=Math.floor(Math.random()*(a+1));[n[a],n[s]]=[n[s],n[a]]}return n}function P(t,n){return Math.floor(Math.random()*(n-t+1)+t)}const ae=""+new URL("cancel-ac8fdd1a.svg",import.meta.url).href,se=""+new URL("launch-e6206def.svg",import.meta.url).href,re=""+new URL("body-e1c4ec9d.svg",import.meta.url).href,ce=""+new URL("meowscarada-8f30ae9e.svg",import.meta.url).href,ie=""+new URL("neco_arc-a0645750.svg",import.meta.url).href,oe=""+new URL("lopunny-ed23b7c3.svg",import.meta.url).href,le=""+new URL("vaporeon-460baefb.svg",import.meta.url).href,ue=""+new URL("neco_arc-b9a98032.svg",import.meta.url).href,de=""+new URL("lopunny-252a1372.svg",import.meta.url).href,ge=""+new URL("meowscarada-b414bb30.svg",import.meta.url).href,he=""+new URL("vaporeon-0cf3d389.svg",import.meta.url).href;function fe(){const t=h(s=>s.language),n=h(s=>s.setLanguage);function a(s){n(s.target.value)}return e.jsx("div",{className:"language_select",children:e.jsxs(V,{value:t,onChange:a,children:[e.jsx(I,{value:"en",children:"English"}),e.jsx(I,{value:"zh_cn",children:"中文"}),e.jsx(I,{value:"ru",children:"Русский"})]})})}function me(){const t=i.useRef(null),n=h(g=>g.dialogue),[a,s]=i.useState("neco_arc"),[c,o]=i.useState("greeting"),[l,f]=i.useState(""),[u,v]=i.useState("zh_cn"),[m,r]=i.useState(""),d=U(g=>g.type),b=p(g=>g.finalRegionList),R=h(g=>g.language),D=p(g=>g.clearFinalRegionList);function H(){t.current&&t.current.classList.toggle("dialogue_bubble--collapsed")}const j=i.useCallback((g,_,k,T)=>{if(!n)return"";const C=n[g];if(!C)return"";let L="";for(;_.length>0;){if(_=O(_),C[_[0]]){L=_[0];break}_.shift()}C[L]||(L="general");const z=C[L];let w="";if(k===""){const B=O(Object.keys(z));if(B.length<=0)return"";w=B[0]}else w=k;const N=z[w];return!N||!N[T]?"":(o(L),f(w),N[T])},[n]);return i.useEffect(()=>{n&&r(()=>n.neco_arc.greeting[0].zh_cn)},[n]),i.useEffect(()=>{d!==a&&(r(()=>j(d,["greeting"],"",u)),s(d))},[d,u,a,j]),i.useEffect(()=>{b.length<=0||(r(()=>j(a,b,"",u)),D())},[b,a,u,j,D]),i.useEffect(()=>{R!==u&&(r(()=>j(a,[c],l,R)),v(R))},[R,a,c,l,u,j]),e.jsxs("div",{className:"dialogue_bubble",ref:t,children:[e.jsxs("div",{className:"dialogue_bubble__switch",onClick:H,children:[e.jsx(y,{children:"visibility"}),e.jsx(y,{children:"forward"}),e.jsx(y,{children:"visibility_off"})]}),e.jsx("div",{className:"dialogue_bubble__content",children:e.jsx("span",{children:m})})]})}function xe(){const t=U(n=>n.headImage);return e.jsxs("div",{className:"secretary",style:{opacity:1},children:[e.jsx("div",{className:"secretary__head",children:e.jsx("img",{src:t,alt:"head"})}),e.jsx("div",{className:"secretary__body",children:e.jsx("img",{src:re,alt:"body"})})]})}function pe(){return e.jsxs("div",{className:"secretary_main",children:[e.jsx(fe,{}),e.jsx(me,{}),e.jsx(xe,{})]})}function ve(){return e.jsx("div",{className:"secretary_bg"})}function je(){return e.jsxs("div",{className:"secretary_display",children:[e.jsx(pe,{}),e.jsx(ve,{})]})}function _e(){const t=U(a=>a.setHeadImage),n=i.useMemo(()=>[{icon:ue,name:"neco_arc",headImage:ie},{icon:he,name:"vaporeon",headImage:le},{icon:de,name:"lopunny",headImage:oe},{icon:ge,name:"meowscarada",headImage:ce}],[]);return i.useEffect(()=>{t(n[0].name,n[0].headImage)},[t,n]),e.jsx("div",{className:"secretary_list",children:n.map((a,s)=>e.jsx("div",{className:"secretary_list__item",onClick:()=>t(a.name,a.headImage),children:e.jsx("img",{src:a.icon,alt:a.name})},s))})}function be(){const[t,n]=i.useState(!1),a=i.useRef(null);function s(){a.current&&(t?a.current.classList.remove("secretary_change_bar--extended"):a.current.classList.add("secretary_change_bar--extended"),n(!t))}return e.jsxs("div",{className:"secretary_change_bar",ref:a,children:[e.jsx(_e,{}),e.jsxs("div",{className:"secretary_change_bar__icon",onClick:s,children:[e.jsx("div",{children:e.jsx(y,{children:"arrow_back_ios_new"})}),e.jsx("div",{children:e.jsx(y,{children:"favorite"})})]})]})}function Le(){return e.jsxs("div",{className:"secretary_scene",children:[e.jsx(je,{}),e.jsx(be,{})]})}const ye=i.memo(({text:t})=>{const n=x(s=>s.setCancelSignal);function a(){n(!0)}return e.jsxs("div",{className:"launch_cancel_btn launch_btn",onClick:a,children:[e.jsx("div",{className:"launch_btn__circle",children:e.jsx("div",{children:e.jsx("img",{src:ae,alt:"cancel"})})}),e.jsx("div",{className:"console_label",children:t})]})});function Se({text:t}){const n=p(a=>a.regionList);return e.jsxs("div",{className:"selected_region_cnt",children:[e.jsx("div",{className:"selected_region_cnt__value",children:n.length}),e.jsx("div",{className:"console_label",children:t})]})}function Re(t){let n=0;return t.forEach(a=>{switch(a){case"Russia":n+=P(0,5e3);break;case"Greenland":n+=0;break;case"Venezuela":n+=666;break;default:n+=P(5e3,2e4);break}}),n}const Ce=i.memo(({text:t})=>{const n=x(l=>l.setLaunchSignal),a=p(l=>l.regionList),s=p(l=>l.updateFinalRegionList),c=A(l=>l.increase);function o(){s(),a.length!==0&&(n(!0),c(Re(a)))}return e.jsxs("div",{className:"launch_confirm_btn launch_btn",onClick:o,children:[e.jsx("div",{className:"launch_btn__circle",children:e.jsx("div",{children:e.jsx("img",{src:se,alt:"launch"})})}),e.jsx("div",{className:"console_label",children:t})]})});function we(){const t=h(a=>a.language),n=h(a=>a.uiTranslation);return e.jsxs("div",{className:"captain_console",children:[e.jsx(ye,{text:n?n.launch_cancel[t]:""}),e.jsx(Se,{text:n?n.selected_region[t]:""}),e.jsx(Ce,{text:n?n.launch_confirm[t]:""})]})}function Ne(){return e.jsxs("div",{className:"captain_cabin",children:[e.jsx(Le,{}),e.jsx(we,{})]})}K([J,Q,X,Y]);const Ie={backgroundColor:"transparent",geo:{show:!0,roam:!0,map:"world",selectedMode:"multiple",itemStyle:{areaColor:"#DAD4B5"},label:{color:"white"},emphasis:{label:{color:"white",show:!0,textBorderWidth:3,textBorderColor:"black",fontSize:"1.5rem",fontFamily:"Times New Roman"},itemStyle:{areaColor:"#E25E3E"}},select:{label:{color:"white",show:!0,textBorderWidth:3,textBorderColor:"black",fontSize:"1.5rem",fontFamily:"Times New Roman"},itemStyle:{areaColor:"#C63D2F"}},center:[37.6175,55.7519],zoom:5}},Ee={width:"100%",height:"99%",border:"none",padding:"0",margin:"0"};function Me({style:t,settings:n,loading:a,theme:s}){const c=i.useRef(null),o=p(r=>r.regionList),l=p(r=>r.setRegionList),f=x(r=>r.launchSignal),u=x(r=>r.setLaunchSignal),v=x(r=>r.cancelSignal),m=x(r=>r.setCancelSignal);return i.useEffect(()=>{let r=null;function d(){r==null||r.resize()}return c.current&&(r=Z(c.current,s),r.on("geoselectchanged",b=>{l(b.allSelected[0].name)})),r&&ee("world",q),window.addEventListener("resize",d),()=>{r==null||r.dispose(),window.removeEventListener("resize",d)}},[s,l]),i.useEffect(()=>{if(!c.current)return;E(c.current).setOption(Ie,n)},[n,s]),i.useEffect(()=>{if(!c.current)return;const r=E(c.current);a?r.showLoading():r.hideLoading()},[a,s]),i.useEffect(()=>{if(!c.current||!f&&!v)return;const r=E(c.current);o.forEach(d=>{r.dispatchAction({type:"geoUnSelect",name:d})}),l([]),u(!1),m(!1)},[f,u,v,m,o,l]),e.jsx("div",{ref:c,style:{...Ee,...t}})}const Ue=""+new URL("death-2a4fedcb.svg",import.meta.url).href,De=""+new URL("cloud-ccf5761c.svg",import.meta.url).href;const W=3e3;function ke(){const[t,n]=i.useState(0),[a,s]=i.useState(0),c=A(o=>o.count);return i.useEffect(()=>{if(c<=t)return;const o=50,l=Math.floor(W/o/2),f=c-t,u=Math.floor(f/l),v=f%l;function m(r){if(r>=l){n(c);return}s(d=>d+u),setTimeout(()=>m(r+1),o)}s(r=>r+v),setTimeout(()=>m(0),o)},[c,t]),e.jsxs("div",{className:"death_cnt",children:[e.jsx("div",{className:"death_cnt__icon",children:e.jsx("img",{src:Ue,alt:"death"})}),e.jsx("div",{className:"death_cnt__value",children:a})]})}function Te(){return e.jsx("div",{className:"world_map__main",children:e.jsx(Me,{})})}function ze(){return e.jsx("div",{className:"explosion_scene",children:e.jsx("img",{src:De,alt:"cloud"})})}function Be(){const[t,n]=i.useState(e.jsx(e.Fragment,{})),a=x(s=>s.launchSignal);return i.useEffect(()=>{a&&(n(e.jsx(ze,{})),setTimeout(()=>{n(e.jsx(e.Fragment,{}))},W))},[a]),e.jsxs("div",{className:"world_map",children:[e.jsx(ke,{}),t,e.jsx(Te,{})]})}function Fe(){const t=h(s=>s.setLanguage),n=h(s=>s.setUiTranslation),a=h(s=>s.setDialogue);return i.useEffect(()=>{n(ne),a(te),t("zh_cn")},[t,n,a]),e.jsxs(i.StrictMode,{children:[e.jsx(Ne,{}),e.jsx(Be,{})]})}M.createRoot(document.getElementById("root")).render(e.jsx(G.StrictMode,{children:e.jsx(Fe,{})}));
